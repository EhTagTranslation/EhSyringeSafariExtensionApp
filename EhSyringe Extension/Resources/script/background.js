!function(){"use strict";var t,e={5397:function(t,e,n){n(3541);var r=n(9809),a=n(2137),i=n(6610),s=n(5991),o=n(7757),c=n.n(o),u=n(655),h=n(2471),g=n(7743),l=n(314),p=n(4801);function f(t){browser.tabs.create({url:t})}function d(t){if(t.background&&chrome.browserAction.setBadgeBackgroundColor&&chrome.browserAction.setBadgeBackgroundColor({color:t.background}),null!=t.text)if(chrome.browserAction.setBadgeText)chrome.browserAction.setBadgeText({text:t.text});else if(chrome.browserAction.setTitle){var e=p.B.displayName,n=t.text?"".concat(e," (").concat(t.text,")"):e;chrome.browserAction.setTitle({title:n})}}var v=n(511),m=function(){function t(){(0,i.Z)(this,t)}return(0,s.Z)(t,[{key:"send",value:function(t){return function(t){browser.notifications.create({type:"basic",title:t.title,message:t.message,iconUrl:browser.runtime.getURL("assets/logo-padding.svg")}).then((function(e){var n=t.action;n&&browser.notifications.onClicked.addListener((function t(r){r===e&&(n(),browser.notifications.onClicked.removeListener(t))}))})).catch(console.error)}(t)}}]),t}();m=(0,u.gn)([(0,h.t)()],m);var b=function(){function t(){(0,i.Z)(this,t)}var e;return(0,s.Z)(t,[{key:"json",value:(e=(0,a.Z)(c().mark((function t(e){var n,r,a=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"GET",t.next=3,fetch(e,{method:n});case 3:return r=t.sent,t.next=6,r.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})},{key:"download",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"arraybuffer";return new Promise((function(a,i){var s=new XMLHttpRequest;s.open(e,t),s.responseType=r,s.onload=function(){s.status>=300?i(new Error("".concat(e," ").concat(t," ").concat(s.statusText," (").concat(s.status,")"))):s.response instanceof ArrayBuffer&&"arraybuffer"===r||"json"===r?a(s.response):i(new Error("数据无法解析"))},s.onerror=function(){i("加载失败")},n&&(s.onprogress=n),s.send()}))}}]),t}();b=(0,u.gn)([(0,r.t6)()],b);var w=function(){function t(e,n,r,a,s){var o=this;(0,i.Z)(this,t),this.logger=e,this.storage=n,this.messaging=r,this.notification=a,this.http=s,this.check().catch(e.error),r.on("check-extension",(function(){return o.check()}))}var e;return(0,s.Z)(t,[{key:"check",value:(e=(0,a.Z)(c().mark((function t(){var e,n,r,a,i;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storage.get("extensionCheck");case 2:if(e=t.sent,!(Date.now()-e<=864e5)){t.next=7;break}return this.logger.info("上次检查于 ".concat(new Date(e).toLocaleString(),"，跳过")),t.abrupt("return",!1);case 7:return t.prev=7,t.next=10,this.http.json("https://api.github.com/repos/EhTagTranslation/EhSyringe/releases/latest");case 10:if(n=t.sent,r="v".concat(p.B.version),"string"==typeof(a=n.tag_name)&&a.startsWith("v")){t.next=17;break}throw i=new Error("响应格式错误"),Object.defineProperty(i,"response",n),i;case 17:return t.next=19,this.storage.set("extensionCheck",Date.now());case 19:if(this.logger.log("检查插件更新",{current:r,latest:a}),a!==r){t.next=22;break}return t.abrupt("return",!1);case 22:return this.notification.send({title:p.B.displayName,message:"发现新的版本 ".concat(a,"，点击跳转到下载页面。"),action:function(){return f(n.html_url)}}),t.abrupt("return",!0);case 26:return t.prev=26,t.t0=t.catch(7),this.logger.error("检查插件更新失败",t.t0),t.abrupt("return",!1);case 30:case"end":return t.stop()}}),t,this,[[7,26]])}))),function(){return e.apply(this,arguments)})}]),t}();w=(0,u.gn)([(0,h.t)(),(0,u.w6)("design:paramtypes",[g.Y,l.K,v.s,m,b])],w);var k=n(6156);function y(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var O=function(){function t(e,n){(0,i.Z)(this,t),this.http=e,this.logger=n}var e,n;return(0,s.Z)(t,[{key:"getLatestVersion",value:(n=(0,a.Z)(c().mark((function t(){var e;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.http.json("https://api.github.com/repos/ehtagtranslation/Database/releases/latest"),t.abrupt("return",e);case 3:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"dataUrls",value:function(t){var e=/<!--((.|\s)+?)-->/gi.exec(t.body);if(!e)throw new Error("GitHub 发布数据无法解析，可能需要更新插件版本");try{var n=JSON.parse(e[1]).mirror;if("string"!=typeof n)throw new Error;return["https://cdn.jsdelivr.net/gh/EhTagTranslation/DatabaseReleases@".concat(n,"/db.html.json"),"https://gitcdn.xyz/cdn/EhTagTranslation/DatabaseReleases/".concat(n,"/db.html.json"),"https://rawcdn.githack.com/EhTagTranslation/DatabaseReleases/".concat(n,"/db.html.json"),"https://cdn.statically.io/gh/EhTagTranslation/DatabaseReleases/".concat(n,"/db.html.json")]}catch(t){throw new Error("GitHub 发布数据无法解析，可能需要更新插件版本")}}},{key:"getData",value:(e=(0,a.Z)(c().mark((function t(e,n){var r,a,i,s,o,u,h,g;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=this.dataUrls(e),i=[],s=y(a),t.prev=3,s.s();case 5:if((o=s.n()).done){t.next=22;break}return u=o.value,t.prev=7,t.next=10,this.http.download(u,"GET",n,"json");case 10:if(h=t.sent,(null===(r=null==h?void 0:h.head)||void 0===r?void 0:r.sha)!==e.target_commitish||!(null==h?void 0:h.data)){t.next=14;break}return this.logger.log("从 ".concat(u," 下载成功")),t.abrupt("return",h);case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(7),i.push(t.t0),this.logger.warn("尝试从 ".concat(u," 下载失败"),t.t0);case 20:t.next=5;break;case 22:t.next=27;break;case 24:t.prev=24,t.t1=t.catch(3),s.e(t.t1);case 27:return t.prev=27,s.f(),t.finish(27);case 30:if(0!==i.length){t.next=32;break}throw new Error("没有获取到有效的文件");case 32:throw g=i[i.length-1],Object.defineProperty(g,"errors",{value:i,enumerable:!0}),g;case 35:case"end":return t.stop()}}),t,this,[[3,24,27,30],[7,16]])}))),function(t,n){return e.apply(this,arguments)})}]),t}();O=(0,u.gn)([(0,r.t6)(),(0,u.w6)("design:paramtypes",[b,g.Y])],O);var j=function(){function t(e){(0,i.Z)(this,t),this.logger=e,this.loadingStrArr=[[""],["⢎⠀","⢆⡀","⢄⡠","⢀⡰","⠀⡱","⠈⠱","⠊⠑","⠎⠁"],["    ","·   "," ·  ","  · ","   ·"]],this.frame=0,this.index=0,this.interval=void 0,this.text="",this.loadingString=[""],this.color="",this.extname="EhSyringe"}return(0,s.Z)(t,[{key:"setColor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#4A90E2";d({background:t})}},{key:"setText",value:function(t){d({text:t})}},{key:"set",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.index!==r&&(this.index=r,this.loadingString=this.loadingStrArr[this.index]||[""],this.frame=0),this.text=t,this.setColor(e),r?this.interval||(this.interval=setInterval((function(){n.setText("".concat(n.text).concat(n.loadingString[n.frame]||"")),n.frame++,n.loadingString[n.frame]||(n.frame=0)}),100)):(this.frame=0,this.interval&&(clearInterval(this.interval),this.interval=void 0),this.setText(this.text))}}]),t}();j=(0,u.gn)([(0,h.t)(),(0,u.w6)("design:paramtypes",[g.Y])],j);var S=n(1912);function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach((function(e){(0,k.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var E={run:!1,progress:0,info:"",complete:!1,error:!1},P=function(){function t(e,n,r,s,o){var u=this;(0,i.Z)(this,t),this.logger=e,this.messaging=n,this.storage=r,this.database=s,this.badge=o,this._lastCheckData={sha:"",check:0,githubRelease:null},this.downloadStatus=Z({},E),this.checked=!1,this.messaging.on("update-database",function(){var t=(0,a.Z)(c().mark((function t(e){var n,r,a,i,s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.force,r=e.recheck,!u.checked||n){t.next=4;break}return u.logger.log("跳过"),t.abrupt("return",void 0);case 4:return t.next=6,u.checkVersion(r);case 6:if(a=t.sent,t.t0=null==a?void 0:a.sha,!t.t0){t.next=17;break}if(t.t1=n,t.t1){t.next=16;break}return t.t2=a.sha,t.next=14,u.messaging.emit("get-tag-sha",void 0);case 14:t.t3=t.sent,t.t1=t.t2!==t.t3;case 16:t.t0=t.t1;case 17:if(!t.t0){t.next=33;break}return t.next=20,u.updating;case 20:return i=u.update(),u.updating=i,t.next=24,i;case 24:if(s=t.sent,u.updating=void 0,!s){t.next=31;break}return u.logger.log("有新版本并更新",a),t.abrupt("return",a);case 31:return u.logger.log("更新新版本失败",a),t.abrupt("return",void 0);case 33:return u.logger.log("没有新版本"),t.abrupt("return",void 0);case 35:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.messaging.on("check-database",function(){var t=(0,a.Z)(c().mark((function t(e){var n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.force,t.next=3,u.checkVersion(n);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.init().catch(e.error)}var e,n,r,o;return(0,s.Z)(t,[{key:"init",value:(o=(0,a.Z)(c().mark((function t(){var e;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storage.get("release");case 2:(e=t.sent)&&e.check>this._lastCheckData.check&&Object.assign(this._lastCheckData,e);case 4:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"lastCheckData",get:function(){return this._lastCheckData},set:function(t){t&&t.check>this.lastCheckData.check&&(Object.assign(this._lastCheckData,t),this.storage.set("release",this._lastCheckData).catch(this.logger.error))}},{key:"update",value:(r=(0,a.Z)(c().mark((function t(){var e,n,r=this;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.initDownloadStatus(),t.prev=1,t.next=4,this.download();case 4:return e=t.sent,t.next=7,this.messaging.emit("update-tag",e.data);case 7:return this.badge.set("OK","#00C801"),this.pushDownloadStatus({run:!0,info:"更新完成",progress:100,complete:!0}),(0,S._)(2500).then((function(){r.downloadStatus.complete&&(r.badge.set("","#4A90E2"),r.initDownloadStatus())})),t.abrupt("return",!0);case 13:return t.prev=13,t.t0=t.catch(1),n=t.t0,this.logger.error(n),this.badge.set("ERR","#C80000"),this.pushDownloadStatus({run:!1,error:!0,info:(null==n?void 0:n.message)?n.message:"更新失败"}),t.abrupt("return",!1);case 20:case"end":return t.stop()}}),t,this,[[1,13]])}))),function(){return r.apply(this,arguments)})},{key:"initDownloadStatus",value:function(){this.downloadStatus=Z({},E),this.messaging.emit("updating-database",this.downloadStatus,!0)}},{key:"pushDownloadStatus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.downloadStatus=Z(Z({},this.downloadStatus),t),this.messaging.emit("updating-database",this.downloadStatus,!0)}},{key:"checkVersion",value:(n=(0,a.Z)(c().mark((function t(){var e,n,r,a=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.length>0&&void 0!==a[0]&&a[0]){t.next=6;break}if(e=(new Date).getTime(),n=this.lastCheckData,!(e-n.check<=3e5&&n.githubRelease)){t.next=6;break}return t.abrupt("return",n);case 6:return t.next=8,this.database.getLatestVersion();case 8:if((r=t.sent).target_commitish){t.next=11;break}throw new Error("获取失败，响应有误");case 11:return this.lastCheckData={sha:r.target_commitish,githubRelease:r,check:Date.now()},this.checked=!0,t.abrupt("return",this.lastCheckData);case 14:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"download",value:(e=(0,a.Z)(c().mark((function t(){var e,n,r,a,i,s=this;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.badge.set("","#4A90E2",2),this.pushDownloadStatus({run:!0,info:"加载中"}),t.next=4,this.checkVersion();case 4:if(n=t.sent,null===(e=null==n?void 0:n.githubRelease)||void 0===e?void 0:e.target_commitish){t.next=8;break}throw this.logger.debug("checkData",n),new Error("无法获取版本信息");case 8:return r=n.githubRelease,a=this.logger.time("开始下载"),t.prev=10,this.pushDownloadStatus({info:"0%",progress:0}),this.badge.set("0","#4A90E2",1),t.next=15,this.database.getData(r,(function(t){if(t.lengthComputable){var e=Math.floor(t.loaded/t.total*100);s.pushDownloadStatus({info:"".concat(e,"%"),progress:e}),s.badge.set(e.toFixed(0),"#4A90E2",1)}}));case 15:return i=t.sent,this.pushDownloadStatus({info:"下载完成",progress:100}),this.badge.set("100","#4A90E2",1),t.abrupt("return",{release:r,data:i});case 19:return t.prev=19,a.end(),t.finish(19);case 22:case"end":return t.stop()}}),t,this,[[10,,19,22]])}))),function(){return e.apply(this,arguments)})}]),t}();P=(0,u.gn)([(0,h.t)(),(0,u.w6)("design:paramtypes",[g.Y,v.s,l.K,O,j])],P);var C=n(8469),T=function(){function t(e,n,r){var s=this;(0,i.Z)(this,t),this.logger=e,this.messaging=n,this.tagging=r,this.origin="https://e-hentai.org",this.onInputStarted=(0,a.Z)(c().mark((function t(){var e,n,r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,browser.tabs.query({url:["*://exhentai.org/*","*://e-hentai.org/*"]});case 2:n=t.sent,(null==(r=null!==(e=n.find((function(t){return t.active})))&&void 0!==e?e:n[0])?void 0:r.url)?s.origin=new URL(r.url).origin:s.origin="https://e-hentai.org";case 5:case"end":return t.stop()}}),t)}))),this.onInputChanged=function(t,e){s.messaging.emit("suggest-tag",{term:t.trim(),limit:5}).then((function(t){var n=t.map((function(t){var e=s.tagging.makeTagMatchHtml(t,"match");return{content:s.tagging.searchTerm(t.tag),description:"".concat(e.cn,"<dim> - ").concat(e.en,"</dim>")}}));e(n)})).catch(s.logger.error)},this.onInputEntered=function(t){f("".concat(s.origin,"/?f_search=").concat(encodeURIComponent(t)))},chrome.omnibox?this.init():e.info("不支持 Omnibox")}return(0,s.Z)(t,[{key:"init",value:function(){var t=this;chrome.omnibox.onInputChanged.addListener(this.onInputChanged),chrome.omnibox.onInputEntered.addListener(this.onInputEntered),chrome.omnibox.onInputStarted.addListener((function(){t.onInputStarted().catch(t.logger.error)}))}}]),t}();T=(0,u.gn)([(0,h.t)(),(0,u.w6)("design:paramtypes",[g.Y,v.s,C.P])],T);var A=function(){function t(e,n,r){var a=this;(0,i.Z)(this,t),this.logger=e,this.messaging=n,this.tagging=r,this.nsScore={female:5,male:4.995,misc:4.5,language:1,artist:3,group:2.5,parody:4,character:3.5,reclass:1,rows:0},this.tagList=[],this.sha="",n.on("suggest-tag",(function(t){return a.getSuggests(t.term,t.limit)})),this.update().catch(e.error)}var e,n;return(0,s.Z)(t,[{key:"update",value:(n=(0,a.Z)(c().mark((function t(){var e;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.messaging.emit("get-tag-map",{ifNotMatch:this.sha});case 2:(e=t.sent).map&&(this.tagList=Object.values(e.map)),this.sha=e.sha;case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"markTag",value:function(t,e,n){var r=t.key,a=t.cn.toLowerCase(),i=r.indexOf(e),s=a.indexOf(e),o=this.tagging.namespace(t.ns),c=0,u={};return i>=0&&(c+=this.nsScore[o]*(e.length+1)/r.length*(0===i?2:1),u.key={start:i,end:i+e.length}),s>=0&&(c+=this.nsScore[o]*(e.length+1)/a.length*(0===s?2:1),u.cn={start:s,end:s+e.length}),{tag:t,term:n,match:u,score:c}}},{key:"getSuggests",value:(e=(0,a.Z)(c().mark((function t(e){var n,r,a,i,s,o,u=this,h=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=h.length>1&&void 0!==h[1]?h[1]:-1,t.next=3,this.update();case 3:if(this.tagList.length&&e){t.next=5;break}return t.abrupt("return",[]);case 5:return r=e.toLowerCase(),a=r.indexOf(":"),i=this.tagList,a>=1&&(s=this.tagging.ns(r.slice(0,a)))&&(r=r.slice(a+1),i=i.filter((function(t){return t.ns===s}))),o=i.map((function(t){return u.markTag(t,r,e)})).filter((function(t){return t.score>0})),e&&(o=o.sort((function(t,e){return e.score-t.score}))),n>0&&(o=o.slice(0,n)),t.abrupt("return",o);case 13:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),t}();A=(0,u.gn)([(0,h.t)(),(0,u.w6)("design:paramtypes",[g.Y,v.s,C.P])],A);var U=n(7386),I=n(1718),L=n(9127),_=n(4975);function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach((function(e){(0,k.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var B=function(){function t(e,n,r,a){var s=this;(0,i.Z)(this,t),this.storage=e,this.logger=n,this.messaging=r,this.tagging=a,this.tagMap=new U.X(void 0),r.on("get-tag",(function(t){return(0,I.z)(s.mapView.pipe((0,L.U)((function(e){return e.map[t]}))))})),r.on("get-tag-map",(function(t){var e=t.ifNotMatch;return(0,I.z)(s.mapView.pipe((0,L.U)((function(t){return e===t.sha?{sha:t.sha,map:void 0}:{sha:t.sha,map:t.map}}))))})),r.on("get-tag-sha",(function(){return(0,I.z)(s.mapView.pipe((0,L.U)((function(t){return t.sha}))))})),this.init().catch(n.error)}var e;return(0,s.Z)(t,[{key:"mapView",get:function(){return this.tagMap.pipe((0,_.h)((function(t){return null!=t})))}},{key:"init",value:(e=(0,a.Z)(c().mark((function t(){var e,n,r,a=this;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storage.get("databaseInfo");case 2:return e=t.sent,t.next=5,this.storage.get("database");case 5:if(n=t.sent,this.messaging.on("update-tag",(function(t){return a.update(t)})),e&&10===e.version&&n&&e.sha){t.next=17;break}return this.tagMap.next({sha:"",map:{}}),r=this.logger.time("数据结构变化, 重新构建数据"),t.next=12,this.storage.migrate();case 12:return t.next=14,this.messaging.emit("update-database",{force:!0});case 14:r.end(),t.next=18;break;case 17:this.tagMap.next(R(R({},e),{},{map:n}));case 18:this.logger.log("标签数据库初始化完成"),this.tagMap.subscribe({next:function(){a.messaging.emit("tag-updated",void 0,!0)}});case 20:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"update",value:function(t){var e=this,n=this.logger.time("构建数据"),r=t.head.sha,a={},i=Date.now();t.data.forEach((function(t){var n=t.namespace;if("rows"!==n)for(var r in t.data){var i=t.data[r],s=e.tagging.fullKey({namespace:n,key:r}),o=e.tagging.removePara(i.name),c={ns:e.tagging.ns(n),key:r,name:o,cn:e.tagging.removeImagesAndEmoji(o)};i.intro&&(c.intro=i.intro),i.links&&(c.links=i.links),a[s]=c}})),this.tagMap.next({map:a,sha:r}),this.storage.set("databaseInfo",{sha:r,check:i,version:10}).catch(this.logger.error),this.storage.set("database",a).catch(this.logger.error),n.end()}}]),t}();function V(t){chrome.contextMenus&&browser.contextMenus.create({title:t.title,targetUrlPatterns:t.targetUrlPatterns,contexts:t.contexts,onclick:function(e){t.onclick({url:e.mediaType?e.srcUrl:e.linkUrl})}})}B=(0,u.gn)([(0,h.t)(),(0,u.w6)("design:paramtypes",[l.K,g.Y,v.s,C.P])],B);var W=function(){function t(e){var n=this;(0,i.Z)(this,t),this.tagging=e,this.documentUrlPatterns=["*://exhentai.org/*","*://e-hentai.org/*","*://*.exhentai.org/*","*://*.e-hentai.org/*"],this.title="提交标签翻译",this.targetUrlPatterns=["*://exhentai.org/tag/*","*://e-hentai.org/tag/*","*://*.exhentai.org/tag/*","*://*.e-hentai.org/tag/*"],this.contexts=["link"],this.onclick=function(t){var e,r,a;if(t.url&&t.url.includes("/tag/")){var i=null!==(r=null===(e=t.url.split("/").pop())||void 0===e?void 0:e.replace(/\+/g," ").split(":"))&&void 0!==r?r:[],s=i.length<=1?"misc":i[0],o=null!==(a=i.pop())&&void 0!==a?a:"";f(n.tagging.editorUrl({namespace:s,key:o}))}},this.init()}return(0,s.Z)(t,[{key:"init",value:function(){V(this)}}]),t}();W=(0,u.gn)([(0,r.t6)(),(0,u.w6)("design:paramtypes",[C.P])],W);var Y=function(){function t(){(0,i.Z)(this,t),this.documentUrlPatterns=["*://exhentai.org/*","*://e-hentai.org/*","*://*.exhentai.org/*","*://*.e-hentai.org/*"],this.title="显示所有包含此图片的图库",this.targetUrlPatterns=["*://exhentai.org/t/*.jpg","*://ehgt.org/*.jpg","*://ul.ehgt.org/*.jpg","*://*.hath.network:*/h/*","*://*.hath.network/h/*"],this.contexts=["image","link"],this.onclick=function(t){var e,n=null!==(e=t.url)&&void 0!==e?e:"",r=/[a-f0-9]{40}/i.exec(n);r&&f("https://exhentai.org/?f_shash=".concat(r[0]))},this.init()}return(0,s.Z)(t,[{key:"init",value:function(){V(this)}}]),t}();Y=(0,u.gn)([(0,r.t6)(),(0,u.w6)("design:paramtypes",[])],Y),Object.defineProperty(window,"Container",{value:r.W2,enumerable:!0}),r.W2.get(w),r.W2.get(P),r.W2.get(B),r.W2.get(A),r.W2.get(T),r.W2.get(W),r.W2.get(Y)}},n={};function r(t){var a=n[t];if(void 0!==a)return a.exports;var i=n[t]={exports:{}};return e[t].call(i.exports,i,i.exports,r),i.exports}r.m=e,t=[],r.O=function(e,n,a,i){if(!n){var s=1/0;for(u=0;u<t.length;u++){n=t[u][0],a=t[u][1],i=t[u][2];for(var o=!0,c=0;c<n.length;c++)(!1&i||s>=i)&&Object.keys(r.O).every((function(t){return r.O[t](n[c])}))?n.splice(c--,1):(o=!1,i<s&&(s=i));o&&(t.splice(u--,1),e=a())}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[n,a,i]},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.j=352,function(){var t={352:0};r.O.j=function(e){return 0===t[e]};var e=function(e,n){var a,i,s=n[0],o=n[1],c=n[2],u=0;for(a in o)r.o(o,a)&&(r.m[a]=o[a]);if(c)var h=c(r);for(e&&e(n);u<s.length;u++)i=s[u],r.o(t,i)&&t[i]&&t[i][0](),t[s[u]]=0;return r.O(h)},n=self.webpackChunkehsyringe=self.webpackChunkehsyringe||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var a=r.O(void 0,[736],(function(){return r(5397)}));a=r.O(a)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9laHN5cmluZ2Uvd2VicGFjay9ydW50aW1lL2NodW5rIGxvYWRlZCIsIndlYnBhY2s6Ly9laHN5cmluZ2UvLi9zcmMvcHJvdmlkZXJzL3dlYi1leHQvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vZWhzeXJpbmdlLy4vc3JjL3NlcnZpY2VzL25vdGlmaWNhdGlvbi50cyIsIndlYnBhY2s6Ly9laHN5cmluZ2UvLi9zcmMvc2VydmljZXMvaHR0cC50cyIsIndlYnBhY2s6Ly9laHN5cmluZ2UvLi9zcmMvcGx1Z2luL2V4dGVuc2lvbi11cGRhdGVyLnRzIiwid2VicGFjazovL2Voc3lyaW5nZS8uL3NyYy9zZXJ2aWNlcy9kYXRhYmFzZS50cyIsIndlYnBhY2s6Ly9laHN5cmluZ2UvLi9zcmMvc2VydmljZXMvYmFkZ2UtbG9hZGluZy50cyIsIndlYnBhY2s6Ly9laHN5cmluZ2UvLi9zcmMvcGx1Z2luL2RhdGFiYXNlLXVwZGF0ZXIudHMiLCJ3ZWJwYWNrOi8vZWhzeXJpbmdlLy4vc3JjL3BsdWdpbi9vbW5pYm94LnRzIiwid2VicGFjazovL2Voc3lyaW5nZS8uL3NyYy9wbHVnaW4vc3VnZ2VzdC50cyIsIndlYnBhY2s6Ly9laHN5cmluZ2UvLi9zcmMvcGx1Z2luL3RhZy1kYXRhYmFzZS50cyIsIndlYnBhY2s6Ly9laHN5cmluZ2UvLi9zcmMvcHJvdmlkZXJzL3dlYi1leHQvbWVudS50cyIsIndlYnBhY2s6Ly9laHN5cmluZ2UvLi9zcmMvcGx1Z2luL3RhZy1jb250ZXh0LW1lbnUudHMiLCJ3ZWJwYWNrOi8vZWhzeXJpbmdlLy4vc3JjL3BsdWdpbi9pbWFnZS1jb250ZXh0LW1lbnUudHMiLCJ3ZWJwYWNrOi8vZWhzeXJpbmdlLy4vc3JjL3dlYi1leHQvYmFja2dyb3VuZC50cyIsIndlYnBhY2s6Ly9laHN5cmluZ2Uvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vZWhzeXJpbmdlL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL2Voc3lyaW5nZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vZWhzeXJpbmdlL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vZWhzeXJpbmdlL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vZWhzeXJpbmdlL3dlYnBhY2svcnVudGltZS9ydW50aW1lSWQiLCJ3ZWJwYWNrOi8vZWhzeXJpbmdlL3dlYnBhY2svcnVudGltZS9qc29ucCBjaHVuayBsb2FkaW5nIiwid2VicGFjazovL2Voc3lyaW5nZS93ZWJwYWNrL3N0YXJ0dXAiXSwibmFtZXMiOlsiZGVmZXJyZWQiLCJvcGVuSW5UYWIiLCJ1cmwiLCJicm93c2VyIiwidGFicyIsImNyZWF0ZSIsInNldEJhZGdlIiwiaW5mbyIsImJhY2tncm91bmQiLCJjaHJvbWUiLCJicm93c2VyQWN0aW9uIiwic2V0QmFkZ2VCYWNrZ3JvdW5kQ29sb3IiLCJjb2xvciIsInRleHQiLCJzZXRCYWRnZVRleHQiLCJzZXRUaXRsZSIsImV4dG5hbWUiLCJ0aXRsZSIsIk5vdGlmaWNhdGlvbiIsIm5vdGlmaWNhdGlvbnMiLCJ0eXBlIiwibWVzc2FnZSIsImljb25VcmwiLCJydW50aW1lIiwiZ2V0VVJMIiwidGhlbiIsImlkIiwiYWN0aW9uIiwib25DbGlja2VkIiwiYWRkTGlzdGVuZXIiLCJsaXN0ZW5lciIsImNpZCIsInJlbW92ZUxpc3RlbmVyIiwiY29uc29sZSIsImVycm9yIiwic2VuZE5vdGlmaWNhdGlvbiIsIkh0dHAiLCJtZXRob2QiLCJmZXRjaCIsInJlcyIsImpzb24iLCJwcm9ncmVzcyIsInJlc3BvbnNlVHlwZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25sb2FkIiwic3RhdHVzIiwiRXJyb3IiLCJzdGF0dXNUZXh0IiwicmVzcG9uc2UiLCJBcnJheUJ1ZmZlciIsIm9uZXJyb3IiLCJvbnByb2dyZXNzIiwic2VuZCIsIkV4dGVuc2lvblVwZGF0ZXIiLCJsb2dnZXIiLCJzdG9yYWdlIiwibWVzc2FnaW5nIiwibm90aWZpY2F0aW9uIiwiaHR0cCIsInRoaXMiLCJjaGVjayIsIm9uIiwiZ2V0IiwibGFzdENoZWNrIiwiRGF0ZSIsIm5vdyIsInRvTG9jYWxlU3RyaW5nIiwiY3VycmVudCIsImxhdGVzdCIsInRhZ19uYW1lIiwic3RhcnRzV2l0aCIsImUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInNldCIsImxvZyIsImh0bWxfdXJsIiwiRGF0YWJhc2UiLCJ2ZXJzaW9uIiwiZGF0YUpzb24iLCJleGVjIiwiYm9keSIsInNoYSIsIkpTT04iLCJwYXJzZSIsIm1pcnJvciIsInVybHMiLCJkYXRhVXJscyIsImVycm9ycyIsImRvd25sb2FkIiwicmVzdWx0IiwiaGVhZCIsInRhcmdldF9jb21taXRpc2giLCJkYXRhIiwicHVzaCIsIndhcm4iLCJsZW5ndGgiLCJ2YWx1ZSIsImVudW1lcmFibGUiLCJCYWRnZUxvYWRpbmciLCJsb2FkaW5nU3RyQXJyIiwiZnJhbWUiLCJpbmRleCIsImludGVydmFsIiwidW5kZWZpbmVkIiwibG9hZGluZ1N0cmluZyIsImxvYWRpbmciLCJzZXRDb2xvciIsInNldEludGVydmFsIiwic2V0VGV4dCIsImNsZWFySW50ZXJ2YWwiLCJydW4iLCJjb21wbGV0ZSIsIkRhdGFiYXNlVXBkYXRlciIsImRhdGFiYXNlIiwiYmFkZ2UiLCJfbGFzdENoZWNrRGF0YSIsImdpdGh1YlJlbGVhc2UiLCJkb3dubG9hZFN0YXR1cyIsImNoZWNrZWQiLCJmb3JjZSIsInJlY2hlY2siLCJjaGVja1ZlcnNpb24iLCJlbWl0IiwidXBkYXRpbmciLCJ1cGRhdGUiLCJzdWNjZXNzIiwiaW5pdCIsImFzc2lnbiIsImxhc3RDaGVja0RhdGEiLCJpbml0RG93bmxvYWRTdGF0dXMiLCJwdXNoRG93bmxvYWRTdGF0dXMiLCJ0aW1lIiwiZ2V0VGltZSIsImdldExhdGVzdFZlcnNpb24iLCJjaGVja0RhdGEiLCJkZWJ1ZyIsInRpbWVyIiwiZ2V0RGF0YSIsImV2ZW50IiwibGVuZ3RoQ29tcHV0YWJsZSIsInBlcmNlbnQiLCJNYXRoIiwiZmxvb3IiLCJsb2FkZWQiLCJ0b3RhbCIsInRvRml4ZWQiLCJyZWxlYXNlIiwiZW5kIiwiT21uaUJveCIsInRhZ2dpbmciLCJvcmlnaW4iLCJvbklucHV0U3RhcnRlZCIsInF1ZXJ5IiwidGFiIiwiZmluZCIsInQiLCJhY3RpdmUiLCJVUkwiLCJvbklucHV0Q2hhbmdlZCIsInN1Z2dlc3RDYiIsInRlcm0iLCJ0cmltIiwibGltaXQiLCJzdWdnZXN0aW9ucyIsIm1hcCIsInN1Z2dlc3Rpb24iLCJodG1sIiwibWFrZVRhZ01hdGNoSHRtbCIsImNvbnRlbnQiLCJzZWFyY2hUZXJtIiwidGFnIiwiZGVzY3JpcHRpb24iLCJjbiIsImVuIiwib25JbnB1dEVudGVyZWQiLCJlbmNvZGVVUklDb21wb25lbnQiLCJvbW5pYm94IiwiU3VnZ2VzdCIsIm5zU2NvcmUiLCJmZW1hbGUiLCJtYWxlIiwibWlzYyIsImxhbmd1YWdlIiwiYXJ0aXN0IiwiZ3JvdXAiLCJwYXJvZHkiLCJjaGFyYWN0ZXIiLCJyZWNsYXNzIiwicm93cyIsInRhZ0xpc3QiLCJhcmdzIiwiZ2V0U3VnZ2VzdHMiLCJpZk5vdE1hdGNoIiwidiIsInZhbHVlcyIsInNlYXJjaCIsImtleSIsInRvTG93ZXJDYXNlIiwia2V5SWR4IiwiaW5kZXhPZiIsIm5hbWVJZHgiLCJucyIsIm5hbWVzcGFjZSIsInNjb3JlIiwibWF0Y2giLCJzdGFydCIsInNUZXJtIiwiY29sIiwic2xpY2UiLCJmaWx0ZXIiLCJtYXJrVGFnIiwic3QiLCJzb3J0Iiwic3QxIiwic3QyIiwiVGFnRGF0YWJhc2UiLCJ0YWdNYXAiLCJCZWhhdmlvclN1YmplY3QiLCJmaXJzdFZhbHVlRnJvbSIsIm1hcFZpZXciLCJwaXBlIiwiZGF0YU1hcCIsIm5leHQiLCJtaWdyYXRlIiwic3Vic2NyaWJlIiwidGFnREIiLCJmb3JFYWNoIiwibnNEYXRhIiwiZnVsbEtleSIsIm5hbWUiLCJyZW1vdmVQYXJhIiwiZWhUYWciLCJyZW1vdmVJbWFnZXNBbmRFbW9qaSIsImludHJvIiwibGlua3MiLCJjcmVhdGVNZW51IiwiY29udGV4dE1lbnVzIiwidGFyZ2V0VXJsUGF0dGVybnMiLCJjb250ZXh0cyIsIm9uY2xpY2siLCJtZWRpYVR5cGUiLCJzcmNVcmwiLCJsaW5rVXJsIiwiVGFnQ29udGV4dE1lbnUiLCJkb2N1bWVudFVybFBhdHRlcm5zIiwiaW5jbHVkZXMiLCJzZWciLCJzcGxpdCIsInBvcCIsInJlcGxhY2UiLCJlZGl0b3JVcmwiLCJJbWFnZUNvbnRleHRNZW51Iiwid2luZG93IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjYWxsIiwibSIsIk8iLCJjaHVua0lkcyIsImZuIiwicHJpb3JpdHkiLCJub3RGdWxmaWxsZWQiLCJJbmZpbml0eSIsImkiLCJmdWxmaWxsZWQiLCJqIiwia2V5cyIsImV2ZXJ5Iiwic3BsaWNlIiwibiIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiYSIsImRlZmluaXRpb24iLCJvIiwiZyIsImdsb2JhbFRoaXMiLCJGdW5jdGlvbiIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImluc3RhbGxlZENodW5rcyIsIjM1MiIsImNodW5rSWQiLCJ3ZWJwYWNrSnNvbnBDYWxsYmFjayIsInBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uIiwibW9yZU1vZHVsZXMiLCJjaHVua0xvYWRpbmdHbG9iYWwiLCJzZWxmIiwiYmluZCIsIl9fd2VicGFja19leHBvcnRzX18iXSwibWFwcGluZ3MiOiI2QkFBSUEsRSwrSUNJRSxTQUFVQyxFQUFVQyxHQUNqQkMsUUFBUUMsS0FBS0MsT0FBTyxDQUNyQkgsUUEwQkYsU0FBVUks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LEVBQVN4SyxPQUFRNkssSUFDekJzQixFQUFVM0IsRUFBU0ssR0FDaEJkLEVBQW9CMEIsRUFBRVEsRUFBaUJFLElBQVlGLEVBQWdCRSxJQUNyRUYsRUFBZ0JFLEdBQVMsS0FFMUJGLEVBQWdCekIsRUFBU0ssSUFBTSxFQUVoQyxPQUFPZCxFQUFvQlEsRUFBRTdLLElBRzFCNk0sRUFBcUJDLEtBQTRCLHNCQUFJQSxLQUE0Qix1QkFBSyxHQUMxRkQsRUFBbUJwRSxRQUFRaUUsRUFBcUJLLEtBQUssS0FBTSxJQUMzREYsRUFBbUJ6TSxLQUFPc00sRUFBcUJLLEtBQUssS0FBTUYsRUFBbUJ6TSxLQUFLMk0sS0FBS0YsSSxHQzdDdkYsSUFBSUcsRUFBc0IzQyxFQUFvQlEsT0FBRS9KLEVBQVcsQ0FBQyxNQUFNLFdBQWEsT0FBT3VKLEVBQW9CLFNBQzFHMkMsRUFBc0IzQyxFQUFvQlEsRUFBRW1DLEciLCJmaWxlIjoic2NyaXB0L2JhY2tncm91bmQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZGVmZXJyZWQgPSBbXTtcbl9fd2VicGFja19yZXF1aXJlX18uTyA9IGZ1bmN0aW9uKHJlc3VsdCwgY2h1bmtJZHMsIGZuLCBwcmlvcml0eSkge1xuXHRpZihjaHVua0lkcykge1xuXHRcdHByaW9yaXR5ID0gcHJpb3JpdHkgfHwgMDtcblx0XHRmb3IodmFyIGkgPSBkZWZlcnJlZC5sZW5ndGg7IGkgPiAwICYmIGRlZmVycmVkW2kgLSAxXVsyXSA+IHByaW9yaXR5OyBpLS0pIGRlZmVycmVkW2ldID0gZGVmZXJyZWRbaSAtIDFdO1xuXHRcdGRlZmVycmVkW2ldID0gW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldO1xuXHRcdHJldHVybjtcblx0fVxuXHR2YXIgbm90RnVsZmlsbGVkID0gSW5maW5pdHk7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWQubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgY2h1bmtJZHMgPSBkZWZlcnJlZFtpXVswXTtcblx0XHR2YXIgZm4gPSBkZWZlcnJlZFtpXVsxXTtcblx0XHR2YXIgcHJpb3JpdHkgPSBkZWZlcnJlZFtpXVsyXTtcblx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNodW5rSWRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRpZiAoKHByaW9yaXR5ICYgMSA9PT0gMCB8fCBub3RGdWxmaWxsZWQgPj0gcHJpb3JpdHkpICYmIE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uTykuZXZlcnkoZnVuY3Rpb24oa2V5KSB7IHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLk9ba2V5XShjaHVua0lkc1tqXSk7IH0pKSB7XG5cdFx0XHRcdGNodW5rSWRzLnNwbGljZShqLS0sIDEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdGlmKHByaW9yaXR5IDwgbm90RnVsZmlsbGVkKSBub3RGdWxmaWxsZWQgPSBwcmlvcml0eTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYoZnVsZmlsbGVkKSB7XG5cdFx0XHRkZWZlcnJlZC5zcGxpY2UoaS0tLCAxKVxuXHRcdFx0cmVzdWx0ID0gZm4oKTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07IiwiaW1wb3J0IHsgTm90aWZpY2F0aW9uSW5mbyB9IGZyb20gJy4uL2NvbW1vbi9ub3RpZmljYXRpb24nO1xuaW1wb3J0IHsgQmFkZ2UgfSBmcm9tICdwcm92aWRlcnMvY29tbW9uL2JhZGdlJztcbmltcG9ydCB7IHBhY2thZ2VKc29uIH0gZnJvbSAnaW5mbyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBvcGVuSW5UYWIodXJsOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB2b2lkIGJyb3dzZXIudGFicy5jcmVhdGUoe1xuICAgICAgICB1cmwsXG4gICAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZW5kTm90aWZpY2F0aW9uKGluZm86IE5vdGlmaWNhdGlvbkluZm8pOiB2b2lkIHtcbiAgICBicm93c2VyLm5vdGlmaWNhdGlvbnNcbiAgICAgICAgLmNyZWF0ZSh7XG4gICAgICAgICAgICB0eXBlOiAnYmFzaWMnLFxuICAgICAgICAgICAgdGl0bGU6IGluZm8udGl0bGUsXG4gICAgICAgICAgICBtZXNzYWdlOiBpbmZvLm1lc3NhZ2UsXG4gICAgICAgICAgICBpY29uVXJsOiBicm93c2VyLnJ1bnRpbWUuZ2V0VVJMKCdhc3NldHMvbG9nby1wYWRkaW5nLnN2ZycpLFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigoaWQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFjdGlvbiA9IGluZm8uYWN0aW9uO1xuICAgICAgICAgICAgaWYgKCFhY3Rpb24pIHJldHVybjtcbiAgICAgICAgICAgIGNvbnN0IGxpc3RlbmVyID0gKGNpZDogc3RyaW5nKTogdm9pZCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNpZCA9PT0gaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyb3dzZXIubm90aWZpY2F0aW9ucy5vbkNsaWNrZWQucmVtb3ZlTGlzdGVuZXIobGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBicm93c2VyLm5vdGlmaWNhdGlvbnMub25DbGlja2VkLmFkZExpc3RlbmVyKGxpc3RlbmVyKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0QmFkZ2UoaW5mbzogQmFkZ2UpOiB2b2lkIHtcbiAgICBpZiAoaW5mby5iYWNrZ3JvdW5kICYmIGNocm9tZS5icm93c2VyQWN0aW9uLnNldEJhZGdlQmFja2dyb3VuZENvbG9yKSB7XG4gICAgICAgIGNocm9tZS5icm93c2VyQWN0aW9uLnNldEJhZGdlQmFja2dyb3VuZENvbG9yKHsgY29sb3I6IGluZm8uYmFja2dyb3VuZCB9KTtcbiAgICB9XG4gICAgaWYgKGluZm8udGV4dCAhPSBudWxsKSB7XG4gICAgICAgIGlmIChjaHJvbWUuYnJvd3NlckFjdGlvbi5zZXRCYWRnZVRleHQpIHtcbiAgICAgICAgICAgIGNocm9tZS5icm93c2VyQWN0aW9uLnNldEJhZGdlVGV4dCh7IHRleHQ6IGluZm8udGV4dCB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChjaHJvbWUuYnJvd3NlckFjdGlvbi5zZXRUaXRsZSkge1xuICAgICAgICAgICAgY29uc3QgZXh0bmFtZSA9IHBhY2thZ2VKc29uLmRpc3BsYXlOYW1lO1xuICAgICAgICAgICAgY29uc3QgdGl0bGUgPSBpbmZvLnRleHQgPyBgJHtleHRuYW1lfSAoJHtpbmZvLnRleHR9KWAgOiBleHRuYW1lO1xuICAgICAgICAgICAgY2hyb21lLmJyb3dzZXJBY3Rpb24uc2V0VGl0bGUoeyB0aXRsZSB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IFNlcnZpY2UgfSBmcm9tICd0eXBlZGknO1xuaW1wb3J0IHsgTm90aWZpY2F0aW9uSW5mbyB9IGZyb20gJ3Byb3ZpZGVycy9jb21tb24vbm90aWZpY2F0aW9uJztcbmltcG9ydCB7IHNlbmROb3RpZmljYXRpb24gfSBmcm9tICdwcm92aWRlcnMvdXRpbHMnO1xuXG5AU2VydmljZSgpXG5leHBvcnQgY2xhc3MgTm90aWZpY2F0aW9uIHtcbiAgICBzZW5kKGluZm86IE5vdGlmaWNhdGlvbkluZm8pOiB2b2lkIHtcbiAgICAgICAgcmV0dXJuIHNlbmROb3RpZmljYXRpb24oaW5mbyk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgU2VydmljZSB9IGZyb20gJy4nO1xuZXhwb3J0IHR5cGUgUHJvZ3Jlc3MgPSAoZXY6IFByb2dyZXNzRXZlbnQpID0+IHZvaWQ7XG5cbkBTZXJ2aWNlKClcbmV4cG9ydCBjbGFzcyBIdHRwIHtcbiAgICBhc3luYyBqc29uPFQ+KHVybDogc3RyaW5nLCBtZXRob2QgPSAnR0VUJyk6IFByb21pc2U8VD4ge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwsIHsgbWV0aG9kIH0pO1xuICAgICAgICByZXR1cm4gKGF3YWl0IHJlcy5qc29uKCkpIGFzIFQ7XG4gICAgfVxuICAgIGRvd25sb2FkKHVybDogc3RyaW5nLCBtZXRob2Q/OiBzdHJpbmcsIHByb2dyZXNzPzogUHJvZ3Jlc3MsIHJlc3BvbnNlVHlwZT86ICdhcnJheWJ1ZmZlcicpOiBQcm9taXNlPEFycmF5QnVmZmVyPjtcbiAgICBkb3dubG9hZDxUPih1cmw6IHN0cmluZywgbWV0aG9kPzogc3RyaW5nLCBwcm9ncmVzcz86IFByb2dyZXNzLCByZXNwb25zZVR5cGU/OiAnanNvbicpOiBQcm9taXNlPFQ+O1xuICAgIGRvd25sb2FkKFxuICAgICAgICB1cmw6IHN0cmluZyxcbiAgICAgICAgbWV0aG9kID0gJ0dFVCcsXG4gICAgICAgIHByb2dyZXNzPzogUHJvZ3Jlc3MsXG4gICAgICAgIHJlc3BvbnNlVHlwZTogJ2pzb24nIHwgJ2FycmF5YnVmZmVyJyA9ICdhcnJheWJ1ZmZlcicsXG4gICAgKTogUHJvbWlzZTxBcnJheUJ1ZmZlcj4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICB4aHIub3BlbihtZXRob2QsIHVybCk7XG4gICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gcmVzcG9uc2VUeXBlO1xuICAgICAgICAgICAgeGhyLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA+PSAzMDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgJHttZXRob2R9ICR7dXJsfSAke3hoci5zdGF0dXNUZXh0fSAoJHt4aHIuc3RhdHVzfSlgKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh4aHIucmVzcG9uc2UgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciAmJiByZXNwb25zZVR5cGUgPT09ICdhcnJheWJ1ZmZlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh4aHIucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2VUeXBlID09PSAnanNvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh4aHIucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ+aVsOaNruaXoOazleino+aekCcpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KCfliqDovb3lpLHotKUnKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAocHJvZ3Jlc3MpIHhoci5vbnByb2dyZXNzID0gcHJvZ3Jlc3M7XG4gICAgICAgICAgICB4aHIuc2VuZCgpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTZXJ2aWNlIH0gZnJvbSAndHlwZWRpJztcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJ3NlcnZpY2VzL2xvZ2dlcic7XG5pbXBvcnQgeyBTdG9yYWdlIH0gZnJvbSAnc2VydmljZXMvc3RvcmFnZSc7XG5pbXBvcnQgeyBvcGVuSW5UYWIgfSBmcm9tICdwcm92aWRlcnMvdXRpbHMnO1xuaW1wb3J0IHsgTWVzc2FnaW5nIH0gZnJvbSAnc2VydmljZXMvbWVzc2FnaW5nJztcbmltcG9ydCB7IE5vdGlmaWNhdGlvbiB9IGZyb20gJ3NlcnZpY2VzL25vdGlmaWNhdGlvbic7XG5pbXBvcnQgeyBIdHRwIH0gZnJvbSAnc2VydmljZXMvaHR0cCc7XG5pbXBvcnQgeyBHaXRodWJSZWxlYXNlIH0gZnJvbSAnaW50ZXJmYWNlJztcbmltcG9ydCB7IHBhY2thZ2VKc29uIH0gZnJvbSAnaW5mbyc7XG5cbkBTZXJ2aWNlKClcbmV4cG9ydCBjbGFzcyBFeHRlbnNpb25VcGRhdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcmVhZG9ubHkgbG9nZ2VyOiBMb2dnZXIsXG4gICAgICAgIHJlYWRvbmx5IHN0b3JhZ2U6IFN0b3JhZ2UsXG4gICAgICAgIHJlYWRvbmx5IG1lc3NhZ2luZzogTWVzc2FnaW5nLFxuICAgICAgICByZWFkb25seSBub3RpZmljYXRpb246IE5vdGlmaWNhdGlvbixcbiAgICAgICAgcmVhZG9ubHkgaHR0cDogSHR0cCxcbiAgICApIHtcbiAgICAgICAgdGhpcy5jaGVjaygpLmNhdGNoKGxvZ2dlci5lcnJvcik7XG4gICAgICAgIG1lc3NhZ2luZy5vbignY2hlY2stZXh0ZW5zaW9uJywgKCkgPT4gdGhpcy5jaGVjaygpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGNoZWNrKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICBjb25zdCBsYXN0Q2hlY2sgPSBhd2FpdCB0aGlzLnN0b3JhZ2UuZ2V0KCdleHRlbnNpb25DaGVjaycpO1xuICAgICAgICBjb25zdCBkaWZmID0gRGF0ZS5ub3coKSAtIGxhc3RDaGVjaztcbiAgICAgICAgaWYgKGRpZmYgPD0gMTAwMCAqIDYwICogNjAgKiAyNCkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhg5LiK5qyh5qOA5p+l5LqOICR7bmV3IERhdGUobGFzdENoZWNrKS50b0xvY2FsZVN0cmluZygpfe+8jOi3s+i/h2ApO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5odHRwLmpzb248R2l0aHViUmVsZWFzZT4oXG4gICAgICAgICAgICAgICAgJ2h0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvRWhUYWdUcmFuc2xhdGlvbi9FaFN5cmluZ2UvcmVsZWFzZXMvbGF0ZXN0JyxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gYHYke3BhY2thZ2VKc29uLnZlcnNpb259YDtcbiAgICAgICAgICAgIGNvbnN0IGxhdGVzdCA9IHJlc3BvbnNlLnRhZ19uYW1lO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBsYXRlc3QgIT0gJ3N0cmluZycgfHwgIWxhdGVzdC5zdGFydHNXaXRoKCd2JykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gbmV3IEVycm9yKCflk43lupTmoLzlvI/plJnor68nKTtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgJ3Jlc3BvbnNlJywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnN0b3JhZ2Uuc2V0KCdleHRlbnNpb25DaGVjaycsIERhdGUubm93KCkpO1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKCfmo4Dmn6Xmj5Lku7bmm7TmlrAnLCB7IGN1cnJlbnQsIGxhdGVzdCB9KTtcbiAgICAgICAgICAgIGlmIChsYXRlc3QgPT09IGN1cnJlbnQpIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgdGhpcy5ub3RpZmljYXRpb24uc2VuZCh7XG4gICAgICAgICAgICAgICAgdGl0bGU6IHBhY2thZ2VKc29uLmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGDlj5HnjrDmlrDnmoTniYjmnKwgJHtsYXRlc3R977yM54K55Ye76Lez6L2s5Yiw5LiL6L296aG16Z2i44CCYCxcbiAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IG9wZW5JblRhYihyZXNwb25zZS5odG1sX3VybCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoJ+ajgOafpeaPkuS7tuabtOaWsOWksei0pScsIGV4KTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IFNlcnZpY2UgfSBmcm9tICcuJztcbmltcG9ydCB7IEdpdGh1YlJlbGVhc2UsIEVIVERhdGFiYXNlIH0gZnJvbSAnaW50ZXJmYWNlJztcbmltcG9ydCB7IEh0dHAsIFByb2dyZXNzIH0gZnJvbSAnLi9odHRwJztcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJy4vbG9nZ2VyJztcblxuQFNlcnZpY2UoKVxuZXhwb3J0IGNsYXNzIERhdGFiYXNlIHtcbiAgICBjb25zdHJ1Y3RvcihyZWFkb25seSBodHRwOiBIdHRwLCByZWFkb25seSBsb2dnZXI6IExvZ2dlcikge31cbiAgICBhc3luYyBnZXRMYXRlc3RWZXJzaW9uKCk6IFByb21pc2U8R2l0aHViUmVsZWFzZT4ge1xuICAgICAgICBjb25zdCBnaXRodWJEb3dubG9hZFVybCA9ICdodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zL2VodGFndHJhbnNsYXRpb24vRGF0YWJhc2UvcmVsZWFzZXMvbGF0ZXN0JztcbiAgICAgICAgY29uc3QgaW5mbyA9IHRoaXMuaHR0cC5qc29uPEdpdGh1YlJlbGVhc2U+KGdpdGh1YkRvd25sb2FkVXJsKTtcbiAgICAgICAgcmV0dXJuIGluZm87XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkYXRhVXJscyh2ZXJzaW9uOiBHaXRodWJSZWxlYXNlKTogc3RyaW5nW10ge1xuICAgICAgICBjb25zdCBkYXRhSnNvbiA9IC88IS0tKCgufFxccykrPyktLT4vZ2kuZXhlYyh2ZXJzaW9uLmJvZHkpO1xuICAgICAgICBpZiAoIWRhdGFKc29uKSB0aHJvdyBuZXcgRXJyb3IoYEdpdEh1YiDlj5HluIPmlbDmja7ml6Dms5Xop6PmnpDvvIzlj6/og73pnIDopoHmm7TmlrDmj5Lku7bniYjmnKxgKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGRhdGFKc29uWzFdKSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICAgICAgICAgICAgY29uc3Qgc2hhID0gZGF0YS5taXJyb3I7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHNoYSAhPSAnc3RyaW5nJykgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIGBodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvRWhUYWdUcmFuc2xhdGlvbi9EYXRhYmFzZVJlbGVhc2VzQCR7c2hhfS9kYi5odG1sLmpzb25gLFxuICAgICAgICAgICAgICAgIGBodHRwczovL2dpdGNkbi54eXovY2RuL0VoVGFnVHJhbnNsYXRpb24vRGF0YWJhc2VSZWxlYXNlcy8ke3NoYX0vZGIuaHRtbC5qc29uYCxcbiAgICAgICAgICAgICAgICBgaHR0cHM6Ly9yYXdjZG4uZ2l0aGFjay5jb20vRWhUYWdUcmFuc2xhdGlvbi9EYXRhYmFzZVJlbGVhc2VzLyR7c2hhfS9kYi5odG1sLmpzb25gLFxuICAgICAgICAgICAgICAgIGBodHRwczovL2Nkbi5zdGF0aWNhbGx5LmlvL2doL0VoVGFnVHJhbnNsYXRpb24vRGF0YWJhc2VSZWxlYXNlcy8ke3NoYX0vZGIuaHRtbC5qc29uYCxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBHaXRIdWIg5Y+R5biD5pWw5o2u5peg5rOV6Kej5p6Q77yM5Y+v6IO96ZyA6KaB5pu05paw5o+S5Lu254mI5pysYCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBnZXREYXRhKHZlcnNpb246IEdpdGh1YlJlbGVhc2UsIHByb2dyZXNzPzogUHJvZ3Jlc3MpOiBQcm9taXNlPEVIVERhdGFiYXNlPiB7XG4gICAgICAgIGNvbnN0IHVybHMgPSB0aGlzLmRhdGFVcmxzKHZlcnNpb24pO1xuICAgICAgICBjb25zdCBlcnJvcnM6IEVycm9yW10gPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCB1cmwgb2YgdXJscykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmh0dHAuZG93bmxvYWQ8RUhURGF0YWJhc2U+KHVybCwgJ0dFVCcsIHByb2dyZXNzLCAnanNvbicpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQ/LmhlYWQ/LnNoYSA9PT0gdmVyc2lvbi50YXJnZXRfY29tbWl0aXNoICYmIHJlc3VsdD8uZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5sb2coYOS7jiAke3VybH0g5LiL6L295oiQ5YqfYCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICBlcnJvcnMucHVzaChleCBhcyBFcnJvcik7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIud2Fybihg5bCd6K+V5LuOICR7dXJsfSDkuIvovb3lpLHotKVgLCBleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVycm9ycy5sZW5ndGggPT09IDApIHRocm93IG5ldyBFcnJvcign5rKh5pyJ6I635Y+W5Yiw5pyJ5pWI55qE5paH5Lu2Jyk7XG4gICAgICAgIGNvbnN0IGUgPSBlcnJvcnNbZXJyb3JzLmxlbmd0aCAtIDFdO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgJ2Vycm9ycycsIHtcbiAgICAgICAgICAgIHZhbHVlOiBlcnJvcnMsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhyb3cgZTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBMb2dnZXIgfSBmcm9tICcuL2xvZ2dlcic7XG5pbXBvcnQgeyBTZXJ2aWNlIH0gZnJvbSAndHlwZWRpJztcbmltcG9ydCB7IHNldEJhZGdlIH0gZnJvbSAncHJvdmlkZXJzL3V0aWxzJztcblxuQFNlcnZpY2UoKVxuZXhwb3J0IGNsYXNzIEJhZGdlTG9hZGluZyB7XG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgbG9nZ2VyOiBMb2dnZXIpIHt9XG5cbiAgICByZWFkb25seSBsb2FkaW5nU3RyQXJyID0gW1xuICAgICAgICBbJyddLFxuICAgICAgICBbJ+KijuKggCcsICfioobioYAnLCAn4qKE4qGgJywgJ+KigOKhsCcsICfioIDiobEnLCAn4qCI4qCxJywgJ+KgiuKgkScsICfioI7ioIEnXSxcbiAgICAgICAgWycgICAgJywgJ8K3ICAgJywgJyDCtyAgJywgJyAgwrcgJywgJyAgIMK3J10sXG4gICAgXTtcblxuICAgIGZyYW1lID0gMDtcbiAgICBpbmRleCA9IDA7XG4gICAgaW50ZXJ2YWw/OiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PiA9IHVuZGVmaW5lZDtcbiAgICB0ZXh0ID0gJyc7XG4gICAgbG9hZGluZ1N0cmluZzogc3RyaW5nW10gPSBbJyddO1xuICAgIGNvbG9yID0gJyc7XG5cbiAgICBleHRuYW1lID0gJ0VoU3lyaW5nZSc7XG5cbiAgICBwcml2YXRlIHNldENvbG9yKGNvbG9yID0gJyM0QTkwRTInKTogdm9pZCB7XG4gICAgICAgIHNldEJhZGdlKHsgYmFja2dyb3VuZDogY29sb3IgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXRUZXh0KHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBzZXRCYWRnZSh7IHRleHQgfSk7XG4gICAgfVxuXG4gICAgc2V0KHRleHQ6IHN0cmluZywgY29sb3I/OiBzdHJpbmcsIGxvYWRpbmcgPSAwKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmluZGV4ICE9PSBsb2FkaW5nKSB7XG4gICAgICAgICAgICB0aGlzLmluZGV4ID0gbG9hZGluZztcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ1N0cmluZyA9IHRoaXMubG9hZGluZ1N0ckFyclt0aGlzLmluZGV4XSB8fCBbJyddO1xuICAgICAgICAgICAgdGhpcy5mcmFtZSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICAgICAgdGhpcy5zZXRDb2xvcihjb2xvcik7XG4gICAgICAgIGlmIChsb2FkaW5nKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaW50ZXJ2YWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFRleHQoYCR7dGhpcy50ZXh0fSR7dGhpcy5sb2FkaW5nU3RyaW5nW3RoaXMuZnJhbWVdIHx8ICcnfWApO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZyYW1lKys7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5sb2FkaW5nU3RyaW5nW3RoaXMuZnJhbWVdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZyYW1lID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmZyYW1lID0gMDtcbiAgICAgICAgICAgIGlmICh0aGlzLmludGVydmFsKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKTtcbiAgICAgICAgICAgICAgICB0aGlzLmludGVydmFsID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXRUZXh0KHRoaXMudGV4dCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBHaXRodWJSZWxlYXNlLCBFSFREYXRhYmFzZSB9IGZyb20gJ2ludGVyZmFjZSc7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tICdzZXJ2aWNlcy9sb2dnZXInO1xuaW1wb3J0IHsgU2VydmljZSB9IGZyb20gJ3R5cGVkaSc7XG5pbXBvcnQgeyBNZXNzYWdpbmcgfSBmcm9tICdzZXJ2aWNlcy9tZXNzYWdpbmcnO1xuaW1wb3J0IHsgU3RvcmFnZSB9IGZyb20gJ3NlcnZpY2VzL3N0b3JhZ2UnO1xuaW1wb3J0IHsgRGF0YWJhc2UgfSBmcm9tICdzZXJ2aWNlcy9kYXRhYmFzZSc7XG5pbXBvcnQgeyBCYWRnZUxvYWRpbmcgfSBmcm9tICdzZXJ2aWNlcy9iYWRnZS1sb2FkaW5nJztcbmltcG9ydCB7IHNsZWVwIH0gZnJvbSAndXRpbHMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIERvd25sb2FkU3RhdHVzIHtcbiAgICBydW46IGJvb2xlYW47XG4gICAgcHJvZ3Jlc3M6IG51bWJlcjtcbiAgICBpbmZvOiBzdHJpbmc7XG4gICAgY29tcGxldGU6IGJvb2xlYW47XG4gICAgZXJyb3I6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVsZWFzZUNoZWNrRGF0YSB7XG4gICAgc2hhOiBzdHJpbmc7XG4gICAgY2hlY2s6IG51bWJlcjtcbiAgICBnaXRodWJSZWxlYXNlOiBHaXRodWJSZWxlYXNlIHwgbnVsbDtcbn1cblxuY29uc3QgZGVmYXVsdFN0YXR1czogRG93bmxvYWRTdGF0dXMgPSB7XG4gICAgcnVuOiBmYWxzZSxcbiAgICBwcm9ncmVzczogMCxcbiAgICBpbmZvOiAnJyxcbiAgICBjb21wbGV0ZTogZmFsc2UsXG4gICAgZXJyb3I6IGZhbHNlLFxufTtcblxuQFNlcnZpY2UoKVxuZXhwb3J0IGNsYXNzIERhdGFiYXNlVXBkYXRlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHJlYWRvbmx5IGxvZ2dlcjogTG9nZ2VyLFxuICAgICAgICByZWFkb25seSBtZXNzYWdpbmc6IE1lc3NhZ2luZyxcbiAgICAgICAgcmVhZG9ubHkgc3RvcmFnZTogU3RvcmFnZSxcbiAgICAgICAgcmVhZG9ubHkgZGF0YWJhc2U6IERhdGFiYXNlLFxuICAgICAgICByZWFkb25seSBiYWRnZTogQmFkZ2VMb2FkaW5nLFxuICAgICkge1xuICAgICAgICB0aGlzLm1lc3NhZ2luZy5vbigndXBkYXRlLWRhdGFiYXNlJywgYXN5bmMgKHsgZm9yY2UsIHJlY2hlY2sgfSkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tlZCAmJiAhZm9yY2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5sb2coJ+i3s+i/hycpO1xuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB2ZXJzaW9uID0gYXdhaXQgdGhpcy5jaGVja1ZlcnNpb24ocmVjaGVjayk7XG4gICAgICAgICAgICBpZiAodmVyc2lvbj8uc2hhICYmIChmb3JjZSB8fCB2ZXJzaW9uLnNoYSAhPT0gKGF3YWl0IHRoaXMubWVzc2FnaW5nLmVtaXQoJ2dldC10YWctc2hhJywgdW5kZWZpbmVkKSkpKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGluZztcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGluZyA9IHRoaXMudXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGluZyA9IHVwZGF0aW5nO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCB1cGRhdGluZztcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0aW5nID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZygn5pyJ5paw54mI5pys5bm25pu05pawJywgdmVyc2lvbik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2ZXJzaW9uO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZygn5pu05paw5paw54mI5pys5aSx6LSlJywgdmVyc2lvbik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKCfmsqHmnInmlrDniYjmnKwnKTtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm1lc3NhZ2luZy5vbignY2hlY2stZGF0YWJhc2UnLCBhc3luYyAoeyBmb3JjZSB9KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jaGVja1ZlcnNpb24oZm9yY2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbml0KCkuY2F0Y2gobG9nZ2VyLmVycm9yKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGluaXQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHN0b3JhZ2UgPSBhd2FpdCB0aGlzLnN0b3JhZ2UuZ2V0KCdyZWxlYXNlJyk7XG4gICAgICAgIGlmIChzdG9yYWdlICYmIHN0b3JhZ2UuY2hlY2sgPiB0aGlzLl9sYXN0Q2hlY2tEYXRhLmNoZWNrKSB7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuX2xhc3RDaGVja0RhdGEsIHN0b3JhZ2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWFkb25seSBfbGFzdENoZWNrRGF0YTogUmVsZWFzZUNoZWNrRGF0YSA9IHtcbiAgICAgICAgc2hhOiAnJyxcbiAgICAgICAgY2hlY2s6IDAsXG4gICAgICAgIGdpdGh1YlJlbGVhc2U6IG51bGwsXG4gICAgfTtcbiAgICBnZXQgbGFzdENoZWNrRGF0YSgpOiBSZWxlYXNlQ2hlY2tEYXRhIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xhc3RDaGVja0RhdGE7XG4gICAgfVxuICAgIHNldCBsYXN0Q2hlY2tEYXRhKHZhbHVlOiBSZWxlYXNlQ2hlY2tEYXRhKSB7XG4gICAgICAgIGlmICh2YWx1ZSAmJiB2YWx1ZS5jaGVjayA+IHRoaXMubGFzdENoZWNrRGF0YS5jaGVjaykge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLl9sYXN0Q2hlY2tEYXRhLCB2YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0KCdyZWxlYXNlJywgdGhpcy5fbGFzdENoZWNrRGF0YSkuY2F0Y2godGhpcy5sb2dnZXIuZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRvd25sb2FkU3RhdHVzID0geyAuLi5kZWZhdWx0U3RhdHVzIH07XG5cbiAgICBwcml2YXRlIGNoZWNrZWQgPSBmYWxzZTtcblxuICAgIHByaXZhdGUgdXBkYXRpbmc/OiBQcm9taXNlPGJvb2xlYW4+O1xuXG4gICAgYXN5bmMgdXBkYXRlKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICAvLyDph43nva7kuIvovb3nirbmgIFcbiAgICAgICAgdGhpcy5pbml0RG93bmxvYWRTdGF0dXMoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmRvd25sb2FkKCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm1lc3NhZ2luZy5lbWl0KCd1cGRhdGUtdGFnJywgZGF0YS5kYXRhKTtcblxuICAgICAgICAgICAgdGhpcy5iYWRnZS5zZXQoJ09LJywgJyMwMEM4MDEnKTtcbiAgICAgICAgICAgIHRoaXMucHVzaERvd25sb2FkU3RhdHVzKHtcbiAgICAgICAgICAgICAgICBydW46IHRydWUsXG4gICAgICAgICAgICAgICAgaW5mbzogJ+abtOaWsOWujOaIkCcsXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IDEwMCxcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdm9pZCBzbGVlcCgyNTAwKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kb3dubG9hZFN0YXR1cy5jb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJhZGdlLnNldCgnJywgJyM0QTkwRTInKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0RG93bmxvYWRTdGF0dXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBlcnIgYXMgRXJyb3I7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihlKTtcbiAgICAgICAgICAgIHRoaXMuYmFkZ2Uuc2V0KCdFUlInLCAnI0M4MDAwMCcpO1xuICAgICAgICAgICAgdGhpcy5wdXNoRG93bmxvYWRTdGF0dXMoe1xuICAgICAgICAgICAgICAgIHJ1bjogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXJyb3I6IHRydWUsXG4gICAgICAgICAgICAgICAgaW5mbzogZT8ubWVzc2FnZSA/IGUubWVzc2FnZSA6ICfmm7TmlrDlpLHotKUnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXREb3dubG9hZFN0YXR1cygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5kb3dubG9hZFN0YXR1cyA9IHsgLi4uZGVmYXVsdFN0YXR1cyB9O1xuICAgICAgICB2b2lkIHRoaXMubWVzc2FnaW5nLmVtaXQoJ3VwZGF0aW5nLWRhdGFiYXNlJywgdGhpcy5kb3dubG9hZFN0YXR1cywgdHJ1ZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwdXNoRG93bmxvYWRTdGF0dXMoZGF0YTogUGFydGlhbDxEb3dubG9hZFN0YXR1cz4gPSB7fSk6IHZvaWQge1xuICAgICAgICB0aGlzLmRvd25sb2FkU3RhdHVzID0ge1xuICAgICAgICAgICAgLi4udGhpcy5kb3dubG9hZFN0YXR1cyxcbiAgICAgICAgICAgIC4uLmRhdGEsXG4gICAgICAgIH07XG4gICAgICAgIHZvaWQgdGhpcy5tZXNzYWdpbmcuZW1pdCgndXBkYXRpbmctZGF0YWJhc2UnLCB0aGlzLmRvd25sb2FkU3RhdHVzLCB0cnVlKTtcbiAgICB9XG5cbiAgICBhc3luYyBjaGVja1ZlcnNpb24oZm9yY2UgPSBmYWxzZSk6IFByb21pc2U8UmVsZWFzZUNoZWNrRGF0YT4ge1xuICAgICAgICBpZiAoIWZvcmNlKSB7XG4gICAgICAgICAgICAvLyDpmZDliLbmr48gNSDliIbpkp/mnIDlpJror7fmsYIgMSDmrKFcbiAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgICAgIGNvbnN0IGxhc3RDaGVja0RhdGEgPSB0aGlzLmxhc3RDaGVja0RhdGE7XG4gICAgICAgICAgICBpZiAodGltZSAtIGxhc3RDaGVja0RhdGEuY2hlY2sgPD0gMTAwMCAqIDYwICogNSAmJiBsYXN0Q2hlY2tEYXRhLmdpdGh1YlJlbGVhc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGFzdENoZWNrRGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGluZm8gPSBhd2FpdCB0aGlzLmRhdGFiYXNlLmdldExhdGVzdFZlcnNpb24oKTtcbiAgICAgICAgaWYgKCFpbmZvLnRhcmdldF9jb21taXRpc2gpIHRocm93IG5ldyBFcnJvcign6I635Y+W5aSx6LSl77yM5ZON5bqU5pyJ6K+vJyk7XG5cbiAgICAgICAgdGhpcy5sYXN0Q2hlY2tEYXRhID0ge1xuICAgICAgICAgICAgc2hhOiBpbmZvLnRhcmdldF9jb21taXRpc2gsXG4gICAgICAgICAgICBnaXRodWJSZWxlYXNlOiBpbmZvLFxuICAgICAgICAgICAgY2hlY2s6IERhdGUubm93KCksXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzLmxhc3RDaGVja0RhdGE7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBkb3dubG9hZCgpOiBQcm9taXNlPHsgcmVsZWFzZTogR2l0aHViUmVsZWFzZTsgZGF0YTogRUhURGF0YWJhc2UgfT4ge1xuICAgICAgICB0aGlzLmJhZGdlLnNldCgnJywgJyM0QTkwRTInLCAyKTtcbiAgICAgICAgdGhpcy5wdXNoRG93bmxvYWRTdGF0dXMoeyBydW46IHRydWUsIGluZm86ICfliqDovb3kuK0nIH0pO1xuICAgICAgICBjb25zdCBjaGVja0RhdGEgPSBhd2FpdCB0aGlzLmNoZWNrVmVyc2lvbigpO1xuICAgICAgICBpZiAoIWNoZWNrRGF0YT8uZ2l0aHViUmVsZWFzZT8udGFyZ2V0X2NvbW1pdGlzaCkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoJ2NoZWNrRGF0YScsIGNoZWNrRGF0YSk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+aXoOazleiOt+WPlueJiOacrOS/oeaBrycpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZm8gPSBjaGVja0RhdGEuZ2l0aHViUmVsZWFzZTtcbiAgICAgICAgY29uc3QgdGltZXIgPSB0aGlzLmxvZ2dlci50aW1lKGDlvIDlp4vkuIvovb1gKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMucHVzaERvd25sb2FkU3RhdHVzKHsgaW5mbzogJzAlJywgcHJvZ3Jlc3M6IDAgfSk7XG4gICAgICAgICAgICB0aGlzLmJhZGdlLnNldCgnMCcsICcjNEE5MEUyJywgMSk7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5kYXRhYmFzZS5nZXREYXRhKGluZm8sIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChldmVudC5sZW5ndGhDb21wdXRhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBlcmNlbnQgPSBNYXRoLmZsb29yKChldmVudC5sb2FkZWQgLyBldmVudC50b3RhbCkgKiAxMDApO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnB1c2hEb3dubG9hZFN0YXR1cyh7IGluZm86IGAke3BlcmNlbnR9JWAsIHByb2dyZXNzOiBwZXJjZW50IH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJhZGdlLnNldChwZXJjZW50LnRvRml4ZWQoMCksICcjNEE5MEUyJywgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnB1c2hEb3dubG9hZFN0YXR1cyh7IGluZm86ICfkuIvovb3lrozmiJAnLCBwcm9ncmVzczogMTAwIH0pO1xuICAgICAgICAgICAgdGhpcy5iYWRnZS5zZXQoJzEwMCcsICcjNEE5MEUyJywgMSk7XG4gICAgICAgICAgICByZXR1cm4geyByZWxlYXNlOiBpbmZvLCBkYXRhIH07XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0aW1lci5lbmQoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IFNlcnZpY2UgfSBmcm9tICd0eXBlZGknO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnc2VydmljZXMvbG9nZ2VyJztcbmltcG9ydCB7IG9wZW5JblRhYiB9IGZyb20gJ3Byb3ZpZGVycy91dGlscyc7XG5pbXBvcnQgeyBNZXNzYWdpbmcgfSBmcm9tICdzZXJ2aWNlcy9tZXNzYWdpbmcnO1xuaW1wb3J0IHsgVGFnZ2luZyB9IGZyb20gJ3NlcnZpY2VzL3RhZ2dpbmcnO1xuXG5AU2VydmljZSgpXG5leHBvcnQgY2xhc3MgT21uaUJveCB7XG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgbG9nZ2VyOiBMb2dnZXIsIHJlYWRvbmx5IG1lc3NhZ2luZzogTWVzc2FnaW5nLCByZWFkb25seSB0YWdnaW5nOiBUYWdnaW5nKSB7XG4gICAgICAgIGlmICghY2hyb21lLm9tbmlib3gpIHtcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCfkuI3mlK/mjIEgT21uaWJveCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdCgpOiB2b2lkIHtcbiAgICAgICAgY2hyb21lLm9tbmlib3gub25JbnB1dENoYW5nZWQuYWRkTGlzdGVuZXIodGhpcy5vbklucHV0Q2hhbmdlZCk7XG4gICAgICAgIGNocm9tZS5vbW5pYm94Lm9uSW5wdXRFbnRlcmVkLmFkZExpc3RlbmVyKHRoaXMub25JbnB1dEVudGVyZWQpO1xuICAgICAgICBjaHJvbWUub21uaWJveC5vbklucHV0U3RhcnRlZC5hZGRMaXN0ZW5lcigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uSW5wdXRTdGFydGVkKCkuY2F0Y2godGhpcy5sb2dnZXIuZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvcmlnaW4gPSAnaHR0cHM6Ly9lLWhlbnRhaS5vcmcnO1xuXG4gICAgcmVhZG9ubHkgb25JbnB1dFN0YXJ0ZWQgPSBhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgICAgIGNvbnN0IHRhYnMgPSBhd2FpdCBicm93c2VyLnRhYnMucXVlcnkoe1xuICAgICAgICAgICAgdXJsOiBbJyo6Ly9leGhlbnRhaS5vcmcvKicsICcqOi8vZS1oZW50YWkub3JnLyonXSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHRhYiA9IHRhYnMuZmluZCgodCkgPT4gdC5hY3RpdmUpID8/IHRhYnNbMF07XG4gICAgICAgIGlmICh0YWI/LnVybCkge1xuICAgICAgICAgICAgdGhpcy5vcmlnaW4gPSBuZXcgVVJMKHRhYi51cmwpLm9yaWdpbjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub3JpZ2luID0gJ2h0dHBzOi8vZS1oZW50YWkub3JnJztcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZWFkb25seSBvbklucHV0Q2hhbmdlZCA9IChcbiAgICAgICAgdGV4dDogc3RyaW5nLFxuICAgICAgICBzdWdnZXN0Q2I6IChzdWdnZXN0UmVzdWx0czogY2hyb21lLm9tbmlib3guU3VnZ2VzdFJlc3VsdFtdKSA9PiB2b2lkLFxuICAgICk6IHZvaWQgPT4ge1xuICAgICAgICB0aGlzLm1lc3NhZ2luZ1xuICAgICAgICAgICAgLmVtaXQoJ3N1Z2dlc3QtdGFnJywgeyB0ZXJtOiB0ZXh0LnRyaW0oKSwgbGltaXQ6IDUgfSlcbiAgICAgICAgICAgIC50aGVuKChzdWdnZXN0aW9ucykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBzdWdnZXN0aW9ucy5tYXAoKHN1Z2dlc3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaHRtbCA9IHRoaXMudGFnZ2luZy5tYWtlVGFnTWF0Y2hIdG1sKHN1Z2dlc3Rpb24sICdtYXRjaCcpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogdGhpcy50YWdnaW5nLnNlYXJjaFRlcm0oc3VnZ2VzdGlvbi50YWcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGAke2h0bWwuY259PGRpbT4gLSAke2h0bWwuZW59PC9kaW0+YCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdWdnZXN0Q2IoZGF0YSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKHRoaXMubG9nZ2VyLmVycm9yKTtcbiAgICB9O1xuXG4gICAgcmVhZG9ubHkgb25JbnB1dEVudGVyZWQgPSAodGV4dDogc3RyaW5nKTogdm9pZCA9PiB7XG4gICAgICAgIG9wZW5JblRhYihgJHt0aGlzLm9yaWdpbn0vP2Zfc2VhcmNoPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHRleHQpfWApO1xuICAgIH07XG59XG4iLCJpbXBvcnQgeyBTZXJ2aWNlIH0gZnJvbSAndHlwZWRpJztcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJ3NlcnZpY2VzL2xvZ2dlcic7XG5pbXBvcnQgeyBFSFROYW1lc3BhY2VOYW1lLCBUYWdJdGVtIH0gZnJvbSAnaW50ZXJmYWNlJztcbmltcG9ydCB7IE1lc3NhZ2luZyB9IGZyb20gJ3NlcnZpY2VzL21lc3NhZ2luZyc7XG5pbXBvcnQgeyBUYWdnaW5nIH0gZnJvbSAnc2VydmljZXMvdGFnZ2luZyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3VnZ2VzdGlvbiB7XG4gICAgdGFnOiBUYWdJdGVtO1xuICAgIHNjb3JlOiBudW1iZXI7XG4gICAgdGVybTogc3RyaW5nO1xuXG4gICAgbWF0Y2g6IHtcbiAgICAgICAga2V5PzogeyBzdGFydDogbnVtYmVyOyBlbmQ6IG51bWJlciB9O1xuICAgICAgICBjbj86IHsgc3RhcnQ6IG51bWJlcjsgZW5kOiBudW1iZXIgfTtcbiAgICB9O1xufVxuXG5AU2VydmljZSgpXG5leHBvcnQgY2xhc3MgU3VnZ2VzdCB7XG4gICAgY29uc3RydWN0b3IocmVhZG9ubHkgbG9nZ2VyOiBMb2dnZXIsIHJlYWRvbmx5IG1lc3NhZ2luZzogTWVzc2FnaW5nLCByZWFkb25seSB0YWdnaW5nOiBUYWdnaW5nKSB7XG4gICAgICAgIG1lc3NhZ2luZy5vbignc3VnZ2VzdC10YWcnLCAoYXJncykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3VnZ2VzdHMoYXJncy50ZXJtLCBhcmdzLmxpbWl0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudXBkYXRlKCkuY2F0Y2gobG9nZ2VyLmVycm9yKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHVwZGF0ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgdiA9IGF3YWl0IHRoaXMubWVzc2FnaW5nLmVtaXQoJ2dldC10YWctbWFwJywgeyBpZk5vdE1hdGNoOiB0aGlzLnNoYSB9KTtcbiAgICAgICAgaWYgKHYubWFwKSB0aGlzLnRhZ0xpc3QgPSBPYmplY3QudmFsdWVzKHYubWFwKTtcbiAgICAgICAgdGhpcy5zaGEgPSB2LnNoYTtcbiAgICB9XG5cbiAgICByZWFkb25seSBuc1Njb3JlOiB7XG4gICAgICAgIFtrIGluIEVIVE5hbWVzcGFjZU5hbWVdOiBudW1iZXI7XG4gICAgfSA9IHtcbiAgICAgICAgZmVtYWxlOiA1LFxuICAgICAgICBtYWxlOiA0Ljk5NSxcbiAgICAgICAgbWlzYzogNC41LFxuICAgICAgICBsYW5ndWFnZTogMSxcbiAgICAgICAgYXJ0aXN0OiAzLFxuICAgICAgICBncm91cDogMi41LFxuICAgICAgICBwYXJvZHk6IDQsXG4gICAgICAgIGNoYXJhY3RlcjogMy41LFxuICAgICAgICByZWNsYXNzOiAxLFxuICAgICAgICByb3dzOiAwLFxuICAgIH07XG5cbiAgICBwcml2YXRlIHRhZ0xpc3Q6IFRhZ0l0ZW1bXSA9IFtdO1xuICAgIHByaXZhdGUgc2hhID0gJyc7XG4gICAgcHJpdmF0ZSBtYXJrVGFnKHRhZzogVGFnSXRlbSwgc2VhcmNoOiBzdHJpbmcsIHRlcm06IHN0cmluZyk6IFN1Z2dlc3Rpb24ge1xuICAgICAgICBjb25zdCBrZXkgPSB0YWcua2V5O1xuICAgICAgICBjb25zdCBjbiA9IHRhZy5jbi50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCBrZXlJZHggPSBrZXkuaW5kZXhPZihzZWFyY2gpO1xuICAgICAgICBjb25zdCBuYW1lSWR4ID0gY24uaW5kZXhPZihzZWFyY2gpO1xuICAgICAgICBjb25zdCBucyA9IHRoaXMudGFnZ2luZy5uYW1lc3BhY2UodGFnLm5zKTtcbiAgICAgICAgbGV0IHNjb3JlID0gMDtcbiAgICAgICAgY29uc3QgbWF0Y2g6IFN1Z2dlc3Rpb25bJ21hdGNoJ10gPSB7fTtcbiAgICAgICAgaWYgKGtleUlkeCA+PSAwKSB7XG4gICAgICAgICAgICBzY29yZSArPSAoKHRoaXMubnNTY29yZVtuc10gKiAoc2VhcmNoLmxlbmd0aCArIDEpKSAvIGtleS5sZW5ndGgpICogKGtleUlkeCA9PT0gMCA/IDIgOiAxKTtcbiAgICAgICAgICAgIG1hdGNoLmtleSA9IHsgc3RhcnQ6IGtleUlkeCwgZW5kOiBrZXlJZHggKyBzZWFyY2gubGVuZ3RoIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5hbWVJZHggPj0gMCkge1xuICAgICAgICAgICAgc2NvcmUgKz0gKCh0aGlzLm5zU2NvcmVbbnNdICogKHNlYXJjaC5sZW5ndGggKyAxKSkgLyBjbi5sZW5ndGgpICogKG5hbWVJZHggPT09IDAgPyAyIDogMSk7XG4gICAgICAgICAgICBtYXRjaC5jbiA9IHsgc3RhcnQ6IG5hbWVJZHgsIGVuZDogbmFtZUlkeCArIHNlYXJjaC5sZW5ndGggfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGFnLFxuICAgICAgICAgICAgdGVybSxcbiAgICAgICAgICAgIG1hdGNoLFxuICAgICAgICAgICAgc2NvcmUsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0U3VnZ2VzdHModGVybTogc3RyaW5nLCBsaW1pdCA9IC0xKTogUHJvbWlzZTxTdWdnZXN0aW9uW10+IHtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgaWYgKCF0aGlzLnRhZ0xpc3QubGVuZ3RoIHx8ICF0ZXJtKSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHNUZXJtID0gdGVybS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCBjb2wgPSBzVGVybS5pbmRleE9mKCc6Jyk7XG4gICAgICAgIGxldCB0YWdMaXN0ID0gdGhpcy50YWdMaXN0O1xuICAgICAgICBpZiAoY29sID49IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IG5zID0gdGhpcy50YWdnaW5nLm5zKHNUZXJtLnNsaWNlKDAsIGNvbCkpO1xuICAgICAgICAgICAgaWYgKG5zKSB7XG4gICAgICAgICAgICAgICAgc1Rlcm0gPSBzVGVybS5zbGljZShjb2wgKyAxKTtcbiAgICAgICAgICAgICAgICB0YWdMaXN0ID0gdGFnTGlzdC5maWx0ZXIoKHRhZykgPT4gdGFnLm5zID09PSBucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN1Z2dlc3Rpb25zID0gdGFnTGlzdC5tYXAoKHRhZykgPT4gdGhpcy5tYXJrVGFnKHRhZywgc1Rlcm0sIHRlcm0pKS5maWx0ZXIoKHN0KSA9PiBzdC5zY29yZSA+IDApO1xuICAgICAgICBpZiAodGVybSkge1xuICAgICAgICAgICAgc3VnZ2VzdGlvbnMgPSBzdWdnZXN0aW9ucy5zb3J0KChzdDEsIHN0MikgPT4gc3QyLnNjb3JlIC0gc3QxLnNjb3JlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGltaXQgPiAwKSB7XG4gICAgICAgICAgICBzdWdnZXN0aW9ucyA9IHN1Z2dlc3Rpb25zLnNsaWNlKDAsIGxpbWl0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3VnZ2VzdGlvbnM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgRUhURGF0YWJhc2UsIFRhZ01hcCwgVGFnSXRlbSB9IGZyb20gJy4uL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBTZXJ2aWNlIH0gZnJvbSAndHlwZWRpJztcbmltcG9ydCB7IFN0b3JhZ2UgfSBmcm9tICdzZXJ2aWNlcy9zdG9yYWdlJztcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJ3NlcnZpY2VzL2xvZ2dlcic7XG5pbXBvcnQgeyBNZXNzYWdpbmcgfSBmcm9tICdzZXJ2aWNlcy9tZXNzYWdpbmcnO1xuaW1wb3J0IHsgVGFnZ2luZyB9IGZyb20gJ3NlcnZpY2VzL3RhZ2dpbmcnO1xuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0LCBmaXJzdFZhbHVlRnJvbSwgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgbWFwLCBmaWx0ZXIgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbi8qIOaVsOaNruWtmOWCqOe7k+aehOeJiOacrCwg5aaC5p6c5LiN5ZCMIOezu+e7n+S8muiHquWKqOaJp+ihjCBzdG9yYWdlVGFnRGF0YSDph43mlrDmnoTlu7rmlbDmja4qL1xuLyog5rOo5oSP6L+Z5piv5pys5Zyw5pWw5o2u57uT5p6ELCDkuLvopoHnlKjkuo4gc3RvcmFnZVRhZ0RhdGHlhoXop6PmnpDmlrnms5Xlj5HnlJ/lj5jljJYsIOmHjeaWsOWKoOi9veaVsOaNrueahCwg5LiO57q/5LiK5peg5YWzKi9cbmNvbnN0IERBVEFfU1RSVUNUVVJFX1ZFUlNJT04gPSAxMDtcblxuaW50ZXJmYWNlIERhdGEge1xuICAgIG1hcDogVGFnTWFwO1xuICAgIHNoYTogc3RyaW5nO1xufVxuXG5AU2VydmljZSgpXG5leHBvcnQgY2xhc3MgVGFnRGF0YWJhc2Uge1xuICAgIHByaXZhdGUgcmVhZG9ubHkgdGFnTWFwID0gbmV3IEJlaGF2aW9yU3ViamVjdDxEYXRhIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpO1xuICAgIGdldCBtYXBWaWV3KCk6IE9ic2VydmFibGU8RGF0YT4ge1xuICAgICAgICByZXR1cm4gdGhpcy50YWdNYXAucGlwZShmaWx0ZXIoKHYpOiB2IGlzIERhdGEgPT4gdiAhPSBudWxsKSk7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHJlYWRvbmx5IHN0b3JhZ2U6IFN0b3JhZ2UsXG4gICAgICAgIHJlYWRvbmx5IGxvZ2dlcjogTG9nZ2VyLFxuICAgICAgICByZWFkb25seSBtZXNzYWdpbmc6IE1lc3NhZ2luZyxcbiAgICAgICAgcmVhZG9ubHkgdGFnZ2luZzogVGFnZ2luZyxcbiAgICApIHtcbiAgICAgICAgbWVzc2FnaW5nLm9uKCdnZXQtdGFnJywgKGtleSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGZpcnN0VmFsdWVGcm9tKHRoaXMubWFwVmlldy5waXBlKG1hcCgodikgPT4gdi5tYXBba2V5XSkpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIG1lc3NhZ2luZy5vbignZ2V0LXRhZy1tYXAnLCAoeyBpZk5vdE1hdGNoIH0pID0+IHtcbiAgICAgICAgICAgIHJldHVybiBmaXJzdFZhbHVlRnJvbShcbiAgICAgICAgICAgICAgICB0aGlzLm1hcFZpZXcucGlwZShcbiAgICAgICAgICAgICAgICAgICAgbWFwKCh2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWZOb3RNYXRjaCA9PT0gdi5zaGEpIHJldHVybiB7IHNoYTogdi5zaGEsIG1hcDogdW5kZWZpbmVkIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzaGE6IHYuc2hhLCBtYXA6IHYubWFwIH07XG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgICAgbWVzc2FnaW5nLm9uKCdnZXQtdGFnLXNoYScsICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBmaXJzdFZhbHVlRnJvbSh0aGlzLm1hcFZpZXcucGlwZShtYXAoKHYpID0+IHYuc2hhKSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbml0KCkuY2F0Y2gobG9nZ2VyLmVycm9yKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGluaXQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnN0b3JhZ2UuZ2V0KCdkYXRhYmFzZUluZm8nKTtcbiAgICAgICAgY29uc3QgZGF0YU1hcCA9IGF3YWl0IHRoaXMuc3RvcmFnZS5nZXQoJ2RhdGFiYXNlJyk7XG4gICAgICAgIHRoaXMubWVzc2FnaW5nLm9uKCd1cGRhdGUtdGFnJywgKGRhdGEpID0+IHRoaXMudXBkYXRlKGRhdGEpKTtcbiAgICAgICAgaWYgKCFkYXRhIHx8IGRhdGEudmVyc2lvbiAhPT0gREFUQV9TVFJVQ1RVUkVfVkVSU0lPTiB8fCAhZGF0YU1hcCB8fCAhZGF0YS5zaGEpIHtcbiAgICAgICAgICAgIHRoaXMudGFnTWFwLm5leHQoeyBzaGE6ICcnLCBtYXA6IHt9IH0pO1xuICAgICAgICAgICAgY29uc3QgdGltZXIgPSB0aGlzLmxvZ2dlci50aW1lKCfmlbDmja7nu5PmnoTlj5jljJYsIOmHjeaWsOaehOW7uuaVsOaNricpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zdG9yYWdlLm1pZ3JhdGUoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubWVzc2FnaW5nLmVtaXQoJ3VwZGF0ZS1kYXRhYmFzZScsIHsgZm9yY2U6IHRydWUgfSk7XG4gICAgICAgICAgICB0aW1lci5lbmQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudGFnTWFwLm5leHQoeyAuLi5kYXRhLCBtYXA6IGRhdGFNYXAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKCfmoIfnrb7mlbDmja7lupPliJ3lp4vljJblrozmiJAnKTtcbiAgICAgICAgdGhpcy50YWdNYXAuc3Vic2NyaWJlKHtcbiAgICAgICAgICAgIG5leHQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB2b2lkIHRoaXMubWVzc2FnaW5nLmVtaXQoJ3RhZy11cGRhdGVkJywgdW5kZWZpbmVkLCB0cnVlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHVwZGF0ZSh0YWdEQjogRUhURGF0YWJhc2UpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgdGltZXIgPSB0aGlzLmxvZ2dlci50aW1lKCfmnoTlu7rmlbDmja4nKTtcbiAgICAgICAgY29uc3Qgc2hhID0gdGFnREIuaGVhZC5zaGE7XG4gICAgICAgIGNvbnN0IG1hcDogVGFnTWFwID0ge307XG4gICAgICAgIGNvbnN0IGNoZWNrID0gRGF0ZS5ub3coKTtcbiAgICAgICAgdGFnREIuZGF0YS5mb3JFYWNoKChuc0RhdGEpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5hbWVzcGFjZSA9IG5zRGF0YS5uYW1lc3BhY2U7XG4gICAgICAgICAgICBpZiAobmFtZXNwYWNlID09PSAncm93cycpIHJldHVybjtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG5zRGF0YS5kYXRhKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG5zRGF0YS5kYXRhW2tleV07XG5cbiAgICAgICAgICAgICAgICBjb25zdCBmdWxsS2V5ID0gdGhpcy50YWdnaW5nLmZ1bGxLZXkoeyBuYW1lc3BhY2UsIGtleSB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gdGhpcy50YWdnaW5nLnJlbW92ZVBhcmEodC5uYW1lKTtcbiAgICAgICAgICAgICAgICBjb25zdCBlaFRhZzogVGFnSXRlbSA9IHtcbiAgICAgICAgICAgICAgICAgICAgbnM6IHRoaXMudGFnZ2luZy5ucyhuYW1lc3BhY2UpLFxuICAgICAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGNuOiB0aGlzLnRhZ2dpbmcucmVtb3ZlSW1hZ2VzQW5kRW1vamkobmFtZSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAodC5pbnRybykgZWhUYWcuaW50cm8gPSB0LmludHJvO1xuICAgICAgICAgICAgICAgIGlmICh0LmxpbmtzKSBlaFRhZy5saW5rcyA9IHQubGlua3M7XG4gICAgICAgICAgICAgICAgbWFwW2Z1bGxLZXldID0gZWhUYWc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnRhZ01hcC5uZXh0KHsgbWFwLCBzaGEgfSk7XG5cbiAgICAgICAgLy8g5ZCO5Y+w57un57ut5aSE55CG77yM55u05o6l6L+U5ZueXG4gICAgICAgIHRoaXMuc3RvcmFnZVxuICAgICAgICAgICAgLnNldCgnZGF0YWJhc2VJbmZvJywge1xuICAgICAgICAgICAgICAgIHNoYSxcbiAgICAgICAgICAgICAgICBjaGVjayxcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBEQVRBX1NUUlVDVFVSRV9WRVJTSU9OLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCh0aGlzLmxvZ2dlci5lcnJvcik7XG4gICAgICAgIHRoaXMuc3RvcmFnZS5zZXQoJ2RhdGFiYXNlJywgbWFwKS5jYXRjaCh0aGlzLmxvZ2dlci5lcnJvcik7XG4gICAgICAgIHRpbWVyLmVuZCgpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IE1lbnUgfSBmcm9tICcuLi9jb21tb24vbWVudSc7XG5pbXBvcnQgeyBNZW51cyB9IGZyb20gJ3dlYmV4dGVuc2lvbi1wb2x5ZmlsbC10cyc7XG5leHBvcnQgKiBmcm9tICcuLi9jb21tb24vbWVudSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVNZW51KGluZm86IE1lbnUpOiB2b2lkIHtcbiAgICBpZiAoIWNocm9tZS5jb250ZXh0TWVudXMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBicm93c2VyLmNvbnRleHRNZW51cy5jcmVhdGUoe1xuICAgICAgICB0aXRsZTogaW5mby50aXRsZSxcbiAgICAgICAgdGFyZ2V0VXJsUGF0dGVybnM6IGluZm8udGFyZ2V0VXJsUGF0dGVybnMsXG4gICAgICAgIGNvbnRleHRzOiBpbmZvLmNvbnRleHRzLFxuICAgICAgICBvbmNsaWNrOiAoZGF0YTogTWVudXMuT25DbGlja0RhdGEpOiB2b2lkID0+IHtcbiAgICAgICAgICAgIGluZm8ub25jbGljayh7XG4gICAgICAgICAgICAgICAgdXJsOiBkYXRhLm1lZGlhVHlwZSA/IGRhdGEuc3JjVXJsIDogZGF0YS5saW5rVXJsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgfSk7XG59XG4iLCJpbXBvcnQgeyBFSFROYW1lc3BhY2VOYW1lIH0gZnJvbSAnLi4vaW50ZXJmYWNlJztcbmltcG9ydCB7IFNlcnZpY2UgfSBmcm9tICdzZXJ2aWNlcyc7XG5pbXBvcnQgeyBjcmVhdGVNZW51LCBDb250ZXh0LCBNZW51LCBPbkNsaWNrRGF0YSB9IGZyb20gJ3Byb3ZpZGVycy9tZW51JztcbmltcG9ydCB7IG9wZW5JblRhYiB9IGZyb20gJ3Byb3ZpZGVycy91dGlscyc7XG5pbXBvcnQgeyBUYWdnaW5nIH0gZnJvbSAnc2VydmljZXMvdGFnZ2luZyc7XG5cbkBTZXJ2aWNlKClcbmV4cG9ydCBjbGFzcyBUYWdDb250ZXh0TWVudSBpbXBsZW1lbnRzIE1lbnUge1xuICAgIGNvbnN0cnVjdG9yKHJlYWRvbmx5IHRhZ2dpbmc6IFRhZ2dpbmcpIHtcbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0KCk6IHZvaWQge1xuICAgICAgICBjcmVhdGVNZW51KHRoaXMpO1xuICAgIH1cbiAgICByZWFkb25seSBkb2N1bWVudFVybFBhdHRlcm5zID0gW1xuICAgICAgICAnKjovL2V4aGVudGFpLm9yZy8qJyxcbiAgICAgICAgJyo6Ly9lLWhlbnRhaS5vcmcvKicsXG4gICAgICAgICcqOi8vKi5leGhlbnRhaS5vcmcvKicsXG4gICAgICAgICcqOi8vKi5lLWhlbnRhaS5vcmcvKicsXG4gICAgXTtcbiAgICByZWFkb25seSB0aXRsZSA9ICfmj5DkuqTmoIfnrb7nv7vor5EnO1xuICAgIHJlYWRvbmx5IHRhcmdldFVybFBhdHRlcm5zID0gW1xuICAgICAgICAnKjovL2V4aGVudGFpLm9yZy90YWcvKicsXG4gICAgICAgICcqOi8vZS1oZW50YWkub3JnL3RhZy8qJyxcbiAgICAgICAgJyo6Ly8qLmV4aGVudGFpLm9yZy90YWcvKicsXG4gICAgICAgICcqOi8vKi5lLWhlbnRhaS5vcmcvdGFnLyonLFxuICAgIF07XG4gICAgcmVhZG9ubHkgY29udGV4dHM6IENvbnRleHRbXSA9IFsnbGluayddO1xuXG4gICAgcmVhZG9ubHkgb25jbGljayA9IChpbmZvOiBPbkNsaWNrRGF0YSk6IHZvaWQgPT4ge1xuICAgICAgICBpZiAoIWluZm8udXJsIHx8ICFpbmZvLnVybC5pbmNsdWRlcygnL3RhZy8nKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlZyA9IGluZm8udXJsLnNwbGl0KCcvJykucG9wKCk/LnJlcGxhY2UoL1xcKy9nLCAnICcpLnNwbGl0KCc6JykgPz8gW107XG4gICAgICAgIGNvbnN0IG5hbWVzcGFjZSA9IHNlZy5sZW5ndGggPD0gMSA/ICdtaXNjJyA6IChzZWdbMF0gYXMgRUhUTmFtZXNwYWNlTmFtZSk7XG4gICAgICAgIGNvbnN0IGtleSA9IHNlZy5wb3AoKSA/PyAnJztcbiAgICAgICAgb3BlbkluVGFiKHRoaXMudGFnZ2luZy5lZGl0b3JVcmwoeyBuYW1lc3BhY2UsIGtleSB9KSk7XG4gICAgfTtcbn1cbiIsImltcG9ydCB7IFNlcnZpY2UgfSBmcm9tICdzZXJ2aWNlcyc7XG5pbXBvcnQgeyBjcmVhdGVNZW51LCBDb250ZXh0LCBNZW51LCBPbkNsaWNrRGF0YSB9IGZyb20gJ3Byb3ZpZGVycy9tZW51JztcbmltcG9ydCB7IG9wZW5JblRhYiB9IGZyb20gJ3Byb3ZpZGVycy91dGlscyc7XG5cbkBTZXJ2aWNlKClcbmV4cG9ydCBjbGFzcyBJbWFnZUNvbnRleHRNZW51IGltcGxlbWVudHMgTWVudSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdCgpOiB2b2lkIHtcbiAgICAgICAgY3JlYXRlTWVudSh0aGlzKTtcbiAgICB9XG4gICAgcmVhZG9ubHkgZG9jdW1lbnRVcmxQYXR0ZXJucyA9IFtcbiAgICAgICAgJyo6Ly9leGhlbnRhaS5vcmcvKicsXG4gICAgICAgICcqOi8vZS1oZW50YWkub3JnLyonLFxuICAgICAgICAnKjovLyouZXhoZW50YWkub3JnLyonLFxuICAgICAgICAnKjovLyouZS1oZW50YWkub3JnLyonLFxuICAgIF07XG4gICAgcmVhZG9ubHkgdGl0bGUgPSAn5pi+56S65omA5pyJ5YyF5ZCr5q2k5Zu+54mH55qE5Zu+5bqTJztcbiAgICByZWFkb25seSB0YXJnZXRVcmxQYXR0ZXJucyA9IFtcbiAgICAgICAgJyo6Ly9leGhlbnRhaS5vcmcvdC8qLmpwZycsXG4gICAgICAgICcqOi8vZWhndC5vcmcvKi5qcGcnLFxuICAgICAgICAnKjovL3VsLmVoZ3Qub3JnLyouanBnJyxcbiAgICAgICAgJyo6Ly8qLmhhdGgubmV0d29yazoqL2gvKicsXG4gICAgICAgICcqOi8vKi5oYXRoLm5ldHdvcmsvaC8qJyxcbiAgICBdO1xuICAgIHJlYWRvbmx5IGNvbnRleHRzOiBDb250ZXh0W10gPSBbJ2ltYWdlJywgJ2xpbmsnXTtcblxuICAgIHJlYWRvbmx5IG9uY2xpY2sgPSAoaW5mbzogT25DbGlja0RhdGEpOiB2b2lkID0+IHtcbiAgICAgICAgY29uc3QgdXJsID0gaW5mby51cmwgPz8gJyc7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gL1thLWYwLTldezQwfS9pLmV4ZWModXJsKTtcbiAgICAgICAgaWYgKCFtYXRjaCkgcmV0dXJuO1xuICAgICAgICBvcGVuSW5UYWIoYGh0dHBzOi8vZXhoZW50YWkub3JnLz9mX3NoYXNoPSR7bWF0Y2hbMF19YCk7XG4gICAgfTtcbn1cbiIsImltcG9ydCAnLi9wb2x5ZmlsbHMnO1xuaW1wb3J0IHsgQ29udGFpbmVyIH0gZnJvbSAnc2VydmljZXMnO1xuaW1wb3J0IHsgRXh0ZW5zaW9uVXBkYXRlciB9IGZyb20gJ3BsdWdpbi9leHRlbnNpb24tdXBkYXRlcic7XG5pbXBvcnQgeyBEYXRhYmFzZVVwZGF0ZXIgfSBmcm9tICdwbHVnaW4vZGF0YWJhc2UtdXBkYXRlcic7XG5pbXBvcnQgeyBPbW5pQm94IH0gZnJvbSAncGx1Z2luL29tbmlib3gnO1xuaW1wb3J0IHsgU3VnZ2VzdCB9IGZyb20gJ3BsdWdpbi9zdWdnZXN0JztcbmltcG9ydCB7IFRhZ0RhdGFiYXNlIH0gZnJvbSAncGx1Z2luL3RhZy1kYXRhYmFzZSc7XG5pbXBvcnQgeyBUYWdDb250ZXh0TWVudSB9IGZyb20gJ3BsdWdpbi90YWctY29udGV4dC1tZW51JztcbmltcG9ydCB7IEltYWdlQ29udGV4dE1lbnUgfSBmcm9tICdwbHVnaW4vaW1hZ2UtY29udGV4dC1tZW51JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ0NvbnRhaW5lcicsIHsgdmFsdWU6IENvbnRhaW5lciwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcblxuQ29udGFpbmVyLmdldChFeHRlbnNpb25VcGRhdGVyKTtcbkNvbnRhaW5lci5nZXQoRGF0YWJhc2VVcGRhdGVyKTtcbkNvbnRhaW5lci5nZXQoVGFnRGF0YWJhc2UpO1xuQ29udGFpbmVyLmdldChTdWdnZXN0KTtcbkNvbnRhaW5lci5nZXQoT21uaUJveCk7XG5Db250YWluZXIuZ2V0KFRhZ0NvbnRleHRNZW51KTtcbkNvbnRhaW5lci5nZXQoSW1hZ2VDb250ZXh0TWVudSk7XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0ZnVuY3Rpb24oKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG5cdFx0ZnVuY3Rpb24oKSB7IHJldHVybiBtb2R1bGU7IH07XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBkZWZpbml0aW9uKSB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqLCBwcm9wKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsgfSIsIl9fd2VicGFja19yZXF1aXJlX18uaiA9IDM1MjsiLCIvLyBubyBiYXNlVVJJXG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0MzUyOiAwXG59O1xuXG4vLyBubyBjaHVuayBvbiBkZW1hbmQgbG9hZGluZ1xuXG4vLyBubyBwcmVmZXRjaGluZ1xuXG4vLyBubyBwcmVsb2FkZWRcblxuLy8gbm8gSE1SXG5cbi8vIG5vIEhNUiBtYW5pZmVzdFxuXG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8uaiA9IGZ1bmN0aW9uKGNodW5rSWQpIHsgcmV0dXJuIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9PT0gMDsgfTtcblxuLy8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG52YXIgd2VicGFja0pzb25wQ2FsbGJhY2sgPSBmdW5jdGlvbihwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiwgZGF0YSkge1xuXHR2YXIgY2h1bmtJZHMgPSBkYXRhWzBdO1xuXHR2YXIgbW9yZU1vZHVsZXMgPSBkYXRhWzFdO1xuXHR2YXIgcnVudGltZSA9IGRhdGFbMl07XG5cdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuXHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcblx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMDtcblx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcblx0XHRcdF9fd2VicGFja19yZXF1aXJlX18ubVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG5cdFx0fVxuXHR9XG5cdGlmKHJ1bnRpbWUpIHZhciByZXN1bHQgPSBydW50aW1lKF9fd2VicGFja19yZXF1aXJlX18pO1xuXHRpZihwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbikgcGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24oZGF0YSk7XG5cdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKCk7XG5cdFx0fVxuXHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkc1tpXV0gPSAwO1xuXHR9XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLk8ocmVzdWx0KTtcbn1cblxudmFyIGNodW5rTG9hZGluZ0dsb2JhbCA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmtlaHN5cmluZ2VcIl0gPSBzZWxmW1wid2VicGFja0NodW5rZWhzeXJpbmdlXCJdIHx8IFtdO1xuY2h1bmtMb2FkaW5nR2xvYmFsLmZvckVhY2god2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCAwKSk7XG5jaHVua0xvYWRpbmdHbG9iYWwucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2guYmluZChjaHVua0xvYWRpbmdHbG9iYWwpKTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGRlcGVuZHMgb24gb3RoZXIgbG9hZGVkIGNodW5rcyBhbmQgZXhlY3V0aW9uIG5lZWQgdG8gYmUgZGVsYXllZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8odW5kZWZpbmVkLCBbNzM2XSwgZnVuY3Rpb24oKSB7IHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzOTcpOyB9KVxuX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyhfX3dlYnBhY2tfZXhwb3J0c19fKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=